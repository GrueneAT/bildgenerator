{
  "version": 3,
  "sources": ["temp-bundle.js"],
  "sourcesContent": ["\n// === resources/js/constants.js ===\n// Application Constants - Centralized configuration\n\nconst AppConstants = {\n    // File handling\n    FILE: {\n        FILENAME_LENGTH: 6,\n        MAX_SIZE_MB: 10,\n        VALID_IMAGE_TYPES: ['image/jpeg', 'image/png', 'image/webp', 'image/svg+xml']\n    },\n\n    // UI Configuration\n    UI: {\n        ALERT_DURATION: 3000,\n        ALERT_FADE_SPEED: 300,\n        MAX_ALERTS: 3,\n        WIZARD_TOTAL_STEPS: 4\n    },\n\n    // Canvas Configuration\n    CANVAS: {\n        SCALE_MAX_MULTIPLIER: 0.002,\n        SNAP_ZONE_RATIO: 20, // canvas.width / 20\n        TARGET_FIND_TOLERANCE: 15,\n        CORNER_SIZE_MULTIPLIER: 0.03,\n        BORDER_SCALE_FACTOR: 2,\n        PADDING: 4,\n        ROTATION_SNAP_TOLERANCE: 2, // degrees\n        ROTATION_SNAP_ANGLES: [0, 90, 180, 270]\n    },\n\n    // Export Configuration\n    EXPORT: {\n        DEFAULT_DPI: 200,\n        SCREEN_DPI: 72,\n        MAX_PIXELS: 250000000, // 250MP browser limit\n        QR_MIN_SIZE: 512,\n        QR_MAX_SIZE: 2048,\n        QR_BORDER_PERCENT: 0.05\n    },\n\n    // Element Scaling\n    SCALING: {\n        TEXT_DEFAULT_WIDTH_RATIO: 0.8,\n        TEXT_DEFAULT_HEIGHT_RATIO: 0.5,\n        IMAGE_DEFAULT_WIDTH_RATIO: 0.5,\n        IMAGE_DEFAULT_HEIGHT_RATIO: 0.4,\n        QR_DEFAULT_WIDTH_RATIO: 0.25,\n        QR_DEFAULT_HEIGHT_RATIO: 0.25,\n        CIRCLE_DEFAULT_WIDTH_RATIO: 0.3,\n        CIRCLE_DEFAULT_HEIGHT_RATIO: 0.3,\n        CROSS_DEFAULT_WIDTH_RATIO: 0.4,\n        CROSS_DEFAULT_HEIGHT_RATIO: 0.3\n    },\n\n    // Circle Clip Sizes\n    CIRCLE_SIZES: {\n        LARGE: { value: 2, percentage: 0.9 },\n        MEDIUM: { value: 3, percentage: 0.7 },\n        SMALL: { value: 4, percentage: 0.5 }\n    },\n\n    // Colors\n    COLORS: {\n        BACKGROUND_PRIMARY: \"rgba(138, 180, 20)\",\n        BACKGROUND_SECONDARY: \"rgba(83,132,48)\",\n        PINK_CIRCLE: \"rgb(225,0,120)\",\n        LOGO_TEXT: \"rgb(255,255,255)\",\n        TEXT_STROKE: \"#000000\",\n        CORNER_COLOR: \"yellow\",\n        BORDER_COLOR: \"rgba(88,42,114)\",\n        CORNER_STROKE: \"#000000\"\n    },\n\n    // Font Configuration\n    FONTS: {\n        DEFAULT_LOGO: \"Gotham Narrow Bold\",\n        DEFAULT_TEXT: \"Gotham Narrow Ultra\",\n        PRELOAD_FONTS: [\n            'Gotham Narrow Ultra Italic',\n            'Gotham Narrow Ultra',\n            'Gotham Narrow Book',\n            'Gotham Narrow Bold'\n        ]\n    },\n\n    // Logo Configuration\n    LOGO: {\n        SCALE_RATIO: 10, // (contentRect.width + contentRect.height) / 10\n        TEXT_SCALE_LONG: 4.8,\n        TEXT_SCALE_SHORT: 6,\n        MAX_TEXT_LENGTH: 16,\n        LINE_HEIGHT: 0.8,\n        ANGLE: -5.5,\n        WIDTH_SCALE: 0.95,\n        // Pink bar text positioning - use WIDTH as reference since it's constant (245px)\n        // Original single-line positioning: 248px * 0.89 = 220.72px from top\n        // Converted to width ratio: 220.72 / 245 = 0.90\n        PINK_BAR_OFFSET_FROM_TOP: 0.90, // Text starts at 90% of logo WIDTH from logo top\n        // Automatic positioning configuration\n        BORDER_CUT_RATIO: 0.91, // For bordered templates: border cuts at 91% of logo height (through pink bar center)\n        BORDERLESS_MARGIN_PERCENT: 0.02, // For borderless templates: logo bottom margin as percentage of canvas height (2%)\n        FILES: {\n            LONG: \"Gruene_Logo_245_268.png\",\n            SHORT: \"Gruene_Logo_245_248.png\",\n            SMALL_LONG: \"Gruene_Logo_120_131.png\",\n            SMALL_SHORT: \"Gruene_Logo_120_121.png\"\n        }\n    }\n};\n\n// Template configurations\n// NOTE: logoTop values are now automatically calculated based on border configuration\n// - Bordered templates (border > 0): Border cuts through pink bar at 91% of logo height\n// - Borderless templates (border = 0): Logo positioned with 2% margin from canvas bottom\n// The logoTop values below are kept for reference but not used in calculations\nconst TemplateConstants = {\n    TEMPLATES: {\n        story: {\n            width: 1080,\n            height: 1920,\n            topBorderMultiplier: 2,\n            border: 10,\n            logoTop: 0.8305,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.9423,\n            dpi: 200,\n        },\n        post_45_border: {\n            width: 1080,\n            height: 1350,\n            topBorderMultiplier: 1,\n            border: 20,\n            logoTop: 0.8151,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.959,\n            dpi: 200,\n        },\n        post_45_no_border: {\n            width: 1080,\n            height: 1350,\n            topBorderMultiplier: 1,\n            border: 0,\n            logoTop: 0.7988,  // 25.6px margin (matches post_45_border)\n            logoTextTop: 0.959,\n            dpi: 200,\n        },\n        event: {\n            width: 1920,\n            height: 1005,\n            topBorderMultiplier: 1,\n            border: 0,\n            logoTop: 0.6799,  // 25.6px margin (matches post_45_border)\n            logoTextTop: 0.9449,\n            dpi: 200,\n        },\n        facebook_header: {\n            width: 820,\n            height: 360,\n            topBorderMultiplier: 1,\n            border: 0,\n            logoTop: 0.5971,  // 25.6px margin (matches post_45_border)\n            logoTextTop: 0.8462,\n            dpi: 150,\n        },\n        a2: {\n            width: 4961,\n            height: 7016,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.8034,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.929,\n            dpi: 150,\n        },\n        a2_quer: {\n            width: 7016,\n            height: 4961,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.6952,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.856,\n            dpi: 150,\n        },\n        a3: {\n            width: 3508,\n            height: 4961,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.8034,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.929,\n            dpi: 200,\n        },\n        a3_quer: {\n            width: 4961,\n            height: 3508,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.6952,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.856,\n            dpi: 200,\n        },\n        a4: {\n            width: 2480,\n            height: 3508,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.8035,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.929,\n            dpi: 250,\n        },\n        a4_quer: {\n            width: 3508,\n            height: 2480,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.6952,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.856,\n            dpi: 250,\n        },\n        a5: {\n            width: 1748,\n            height: 2480,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.8038,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.929,\n            dpi: 300,\n        },\n        a5_quer: {\n            width: 2480,\n            height: 1748,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.6945,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.856,\n            dpi: 300,\n        },\n        a6: {\n            width: 1240,\n            height: 1748,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.8038,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.929,\n            dpi: 300,\n        },\n        a6_quer: {\n            width: 1748,\n            height: 1240,\n            topBorderMultiplier: 1,\n            border: 10,\n            logoTop: 0.6945,  // Border cuts through pink bar (87.3% of logo height)\n            logoTextTop: 0.856,\n            dpi: 300,\n        },\n    },\n\n    // Get template by name\n    getTemplate(templateName) {\n        return this.TEMPLATES[templateName] || null;\n    },\n\n    // Get current template\n    getCurrentTemplate() {\n        const templateName = jQuery(\"#canvas-template\").find(\":selected\").attr(\"value\");\n        return this.getTemplate(templateName);\n    }\n};\n\n// Legacy support - keep the old template_values for backwards compatibility\nconst template_values = TemplateConstants.TEMPLATES;\n\n// Helper function for backwards compatibility\nfunction currentTemplate() {\n    return TemplateConstants.getCurrentTemplate();\n}\n\n// Make available globally\nwindow.AppConstants = AppConstants;\nwindow.TemplateConstants = TemplateConstants;\nwindow.template_values = template_values;\nwindow.currentTemplate = currentTemplate;\n\n// === resources/js/validation.js ===\n// Validation Utilities - Centralized validation functions\n\nconst ValidationUtils = {\n    // File validation\n    VALID_IMAGE_TYPES: ['image/jpeg', 'image/png', 'image/webp', 'image/svg+xml'],\n    \n    isValidImage(fileType) {\n        return this.VALID_IMAGE_TYPES.includes(fileType);\n    },\n\n    isValidImageFile(file) {\n        if (!file) return false;\n        return this.isValidImage(file.type);\n    },\n\n    // JSON validation\n    isValidJSON(str) {\n        try {\n            JSON.parse(str);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    },\n\n    // Canvas validation\n    validateStep1() {\n        const template = jQuery('#canvas-template').val();\n        const logo = jQuery('#logo-selection').val();\n        const logoEnabled = LogoState.isLogoEnabled();\n\n        const errors = [];\n\n        if (!template) {\n            errors.push('Bitte w\u00E4hlen Sie eine Vorlage aus.');\n        }\n\n        // Only validate logo if logo feature is enabled\n        if (logoEnabled && !logo) {\n            errors.push('Bitte w\u00E4hlen Sie ein Logo aus.');\n        }\n\n        return {\n            isValid: errors.length === 0,\n            errors: errors\n        };\n    },\n\n    // Text validation\n    validateTextInput(text) {\n        if (!text || text.trim() === '') {\n            return {\n                isValid: false,\n                error: 'Text field is empty'\n            };\n        }\n        \n        return {\n            isValid: true,\n            error: null\n        };\n    },\n\n    // QR Code validation\n    validateQRInput(text) {\n        if (!text || text.trim() === '') {\n            return {\n                isValid: false,\n                error: 'QR Code Text field is empty'\n            };\n        }\n        \n        // Check if QRCode library is available\n        if (typeof QRCode === \"undefined\") {\n            return {\n                isValid: false,\n                error: 'QR Code library not loaded'\n            };\n        }\n        \n        return {\n            isValid: true,\n            error: null\n        };\n    },\n\n    // Canvas object validation\n    validateCanvasObject(object, allowedTypes = []) {\n        if (!object) {\n            return {\n                isValid: false,\n                error: 'No object selected'\n            };\n        }\n\n        if (allowedTypes.length > 0 && !allowedTypes.includes(object.type)) {\n            return {\n                isValid: false,\n                error: `Invalid object type. Expected: ${allowedTypes.join(', ')}, got: ${object.type}`\n            };\n        }\n\n        return {\n            isValid: true,\n            error: null\n        };\n    },\n\n    // Circle clip validation\n    validateCircleClipTarget(activeObject) {\n        if (!activeObject) {\n            return {\n                isValid: false,\n                error: 'Bitte w\u00E4hlen Sie zuerst ein Element aus, um einen Kreis-Ausschnitt anzuwenden.',\n                type: 'warning'\n            };\n        }\n\n        if (activeObject === contentImage) {\n            return {\n                isValid: false,\n                error: 'Kreis-Ausschnitt kann nicht auf das Hintergrundbild angewendet werden. F\u00FCgen Sie zuerst ein eigenes Bild \u00FCber \"Bild hinzuf\u00FCgen\" ein.',\n                type: 'warning'\n            };\n        }\n\n        if (activeObject === logo || activeObject === logoName) {\n            return {\n                isValid: false,\n                error: 'Kreis-Ausschnitt kann nicht auf das Logo angewendet werden. W\u00E4hlen Sie ein eingef\u00FCgtes Bild aus.',\n                type: 'warning'\n            };\n        }\n\n        const isValidForCircle = \n            activeObject.type === \"image\" ||\n            activeObject.type === \"rect\" ||\n            activeObject.type === \"circle\";\n\n        if (!isValidForCircle) {\n            return {\n                isValid: false,\n                error: 'Kreis-Ausschnitt kann nur auf eingef\u00FCgte Bilder und Elemente angewendet werden. W\u00E4hlen Sie zuerst ein Element aus.',\n                type: 'warning'\n            };\n        }\n\n        return {\n            isValid: true,\n            error: null\n        };\n    },\n\n    // Download validation\n    validateDownload() {\n        const logoEnabled = LogoState.isLogoEnabled();\n\n        // Only validate logo if logo feature is enabled\n        if (logoEnabled && (!logoText || logoText === \"\")) {\n            return {\n                isValid: false,\n                error: 'W\u00E4hle bitte ein Logo aus vor dem Download!'\n            };\n        }\n\n        return {\n            isValid: true,\n            error: null\n        };\n    },\n\n    // File size validation\n    validateFileSize(file, maxSizeMB = 10) {\n        if (!file) return { isValid: false, error: 'No file provided' };\n        \n        const maxSizeBytes = maxSizeMB * 1024 * 1024;\n        \n        if (file.size > maxSizeBytes) {\n            return {\n                isValid: false,\n                error: `File too large. Maximum size is ${maxSizeMB}MB`\n            };\n        }\n        \n        return {\n            isValid: true,\n            error: null\n        };\n    }\n};\n\n// Make available globally\nwindow.ValidationUtils = ValidationUtils;\n\n// === resources/js/logo-state.js ===\n/**\n * LogoState - Logo Enable/Disable State Management\n *\n * Manages the state of whether logos should be automatically added\n * to canvases. Logo is enabled by default and state does NOT persist across sessions.\n */\n\nconst LogoState = {\n    // In-memory state - always starts as enabled\n    _enabled: true,\n\n    /**\n     * Check if logo feature is enabled\n     * @returns {boolean} True if logo should be added to canvas\n     */\n    isLogoEnabled() {\n        return this._enabled;\n    },\n\n    /**\n     * Set logo enabled state (session only, does not persist)\n     * @param {boolean} enabled - True to enable logo, false to disable\n     */\n    setLogoEnabled(enabled) {\n        this._enabled = Boolean(enabled);\n    },\n\n    /**\n     * Initialize logo state - always starts enabled\n     * Call this on page load\n     */\n    initialize() {\n        // Always start with logo enabled\n        this._enabled = true;\n    }\n};\n\n// Make LogoState available globally\nif (typeof window !== 'undefined') {\n    window.LogoState = LogoState;\n}\n\n// Also export for Node.js testing\nif (typeof global !== 'undefined') {\n    global.LogoState = LogoState;\n}\n\n\n// === resources/js/alert-system.js ===\n// Unified Alert System - Consolidates all alert functionality\n\nconst AlertSystem = {\n    // Configuration\n    config: {\n        duration: 5000,\n        fadeSpeed: 300,\n        maxAlerts: 3\n    },\n\n    // Alert type configurations - Updated for consistency\n    alertTypes: {\n        success: {\n            classes: 'bg-green-50 border-green-200 text-green-800',\n            iconColor: 'text-green-500',\n            icon: 'fas fa-check-circle'\n        },\n        warning: {\n            classes: 'bg-yellow-50 border-yellow-200 text-yellow-800',\n            iconColor: 'text-yellow-500',\n            icon: 'fas fa-exclamation-triangle'\n        },\n        danger: {\n            classes: 'bg-red-50 border-red-200 text-red-800',\n            iconColor: 'text-red-500',\n            icon: 'fas fa-exclamation-circle'\n        },\n        error: {\n            classes: 'bg-red-50 border-red-200 text-red-800',\n            iconColor: 'text-red-500',\n            icon: 'fas fa-exclamation-circle'\n        },\n        info: {\n            classes: 'bg-blue-50 border-blue-200 text-blue-800',\n            iconColor: 'text-blue-500',\n            icon: 'fas fa-info-circle'\n        }\n    },\n\n    // Get alert container\n    getContainer() {\n        let container = jQuery('.alert-container');\n        if (container.length === 0) {\n            // Create container if it doesn't exist\n            container = jQuery('<div class=\"alert-container max-w-7xl mx-auto px-4 mt-4 hidden\"></div>');\n            jQuery('body').prepend(container);\n        }\n        return container;\n    },\n\n    // Show alert with enhanced styling\n    show(message, type = 'info', options = {}) {\n        const container = options.container ? jQuery(options.container) : this.getContainer();\n        return this.showInContainer(message, type, container, options);\n    },\n\n    // Show alert in specific container\n    showInContainer(message, type = 'info', container, options = {}) {\n        const alertConfig = this.alertTypes[type] || this.alertTypes['info'];\n        \n        if (container.length === 0) {\n            console.warn('Alert container not found');\n            return null;\n        }\n        \n        // Clear existing alerts if specified in options\n        if (options.clearExisting) {\n            container.empty();\n        } else {\n            // Limit number of alerts\n            const existingAlerts = container.find('.alert');\n            if (existingAlerts.length >= this.config.maxAlerts) {\n                existingAlerts.first().remove();\n            }\n        }\n\n        const alertHTML = `\n            <div class=\"alert ${alertConfig.classes} border rounded-lg p-4 mb-4 shadow-sm fade-in flex items-start space-x-3\" role=\"alert\">\n                <div class=\"flex-shrink-0\">\n                    <i class=\"${alertConfig.icon} ${alertConfig.iconColor}\"></i>\n                </div>\n                <div class=\"flex-1\">\n                    <p class=\"text-sm font-medium\">${message}</p>\n                </div>\n                <div class=\"flex-shrink-0\">\n                    <button type=\"button\" class=\"text-gray-400 hover:text-gray-600 focus:outline-none alert-close-btn\">\n                        <span class=\"sr-only\">Schlie\u00DFen</span>\n                        <i class=\"fas fa-times\"></i>\n                    </button>\n                </div>\n            </div>\n        `;\n\n        container.removeClass('hidden').append(alertHTML);\n        \n        // Get the newly added alert\n        const newAlert = container.find('.alert').last();\n        \n        // Add click handler for close button\n        newAlert.find('.alert-close-btn').on('click', () => {\n            this.closeAlertInContainer(newAlert, container);\n        });\n\n        // Auto-remove after configured duration\n        if (options.autoClose !== false) {\n            setTimeout(() => {\n                this.closeAlertInContainer(newAlert, container);\n            }, options.duration || this.config.duration);\n        }\n\n        // Scroll into view if specified\n        if (options.scrollIntoView) {\n            this.scrollAlertIntoView(container);\n        }\n\n        return newAlert;\n    },\n\n    // Close specific alert\n    closeAlert(alertElement) {\n        const container = this.getContainer();\n        this.closeAlertInContainer(alertElement, container);\n    },\n\n    // Close specific alert in container\n    closeAlertInContainer(alertElement, container) {\n        alertElement.fadeOut(this.config.fadeSpeed, () => {\n            alertElement.remove();\n            \n            // Hide container if no more alerts\n            if (container.find('.alert').length === 0) {\n                container.addClass('hidden');\n            }\n        });\n    },\n\n    // Scroll alert into view - completely disabled\n    scrollAlertIntoView(container) {\n        // Auto-scroll removed completely\n        return;\n    },\n\n    // Close all alerts\n    closeAll() {\n        const container = this.getContainer();\n        container.find('.alert').fadeOut(this.config.fadeSpeed, function() {\n            jQuery(this).remove();\n        });\n        setTimeout(() => {\n            container.addClass('hidden');\n        }, this.config.fadeSpeed);\n    },\n\n    // Specialized alert methods\n    success(message, options = {}) {\n        return this.show(message, 'success', options);\n    },\n\n    warning(message, options = {}) {\n        return this.show(message, 'warning', options);\n    },\n\n    error(message, options = {}) {\n        return this.show(message, 'error', options);\n    },\n\n    danger(message, options = {}) {\n        return this.show(message, 'danger', options);\n    },\n\n    info(message, options = {}) {\n        return this.show(message, 'info', options);\n    },\n\n    // QR-specific alert methods\n    showQRAlert(message, type = 'info', options = {}) {\n        const qrOptions = {\n            container: '#qr-alert-container',\n            clearExisting: true,\n            scrollIntoView: true,\n            ...options\n        };\n        \n        // Show in QR container\n        const qrAlert = this.showInContainer(message, type, jQuery('#qr-alert-container'), qrOptions);\n        \n        // Also show in main container for dual display\n        const mainAlert = this.show(message, type, { autoClose: options.autoClose });\n        \n        return { qrAlert, mainAlert };\n    },\n\n    // Legacy support for existing code\n    showTailwindAlert(message, type = 'info') {\n        return this.show(message, type);\n    }\n};\n\n// Global functions for backwards compatibility\nfunction showAlert(message, type = 'danger') {\n    return AlertSystem.show(message, type);\n}\n\nfunction showTailwindAlert(message, type = 'info') {\n    return AlertSystem.show(message, type);\n}\n\nfunction showQRAlert(message, type = 'info') {\n    return AlertSystem.showQRAlert(message, type);\n}\n\n// Make available globally\nwindow.AlertSystem = AlertSystem;\nwindow.showAlert = showAlert;\nwindow.showTailwindAlert = showTailwindAlert;\nwindow.showQRAlert = showQRAlert;\n\n// Add CSS for fade-in animation\njQuery(document).ready(function() {\n    if (!jQuery('#alert-system-styles').length) {\n        jQuery('head').append(`\n            <style id=\"alert-system-styles\">\n                .fade-in {\n                    animation: fadeIn 0.3s ease-in-out;\n                }\n                \n                @keyframes fadeIn {\n                    from {\n                        opacity: 0;\n                        transform: translateY(-10px);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n                \n                .alert-close-btn:hover {\n                    opacity: 0.75;\n                }\n            </style>\n        `);\n    }\n});\n\n// === resources/js/canvas-utils.js ===\n// Canvas Utilities - Centralized canvas manipulation functions\n\n// Canvas scaling and positioning utilities\nconst CanvasUtils = {\n    // Scale element to fit within specified ratios\n    scaleElementToFit(element, maxWidthRatio = 0.5, maxHeightRatio = 0.4) {\n        const maxWidth = canvas.width * maxWidthRatio;\n        const maxHeight = canvas.height * maxHeightRatio;\n\n        const elementWidth = element.width || element.getScaledWidth();\n        const elementHeight = element.height || element.getScaledHeight();\n\n        const widthScale = maxWidth / elementWidth;\n        const heightScale = maxHeight / elementHeight;\n        const scale = Math.min(widthScale, heightScale);\n\n        if (element.type === \"text\") {\n            if (widthScale < heightScale) {\n                element.scaleToWidth(maxWidth);\n            } else {\n                element.scaleToHeight(maxHeight);\n            }\n        } else if (element.scaleToWidth && element.scaleToHeight) {\n            if (widthScale < heightScale) {\n                element.scaleToWidth(maxWidth);\n            } else {\n                element.scaleToHeight(maxHeight);\n            }\n        } else {\n            element.scale(scale);\n        }\n\n        element.setCoords();\n    },\n\n    // Control visibility configurations\n    disableScalingControls(object) {\n        object.setControlsVisibility({\n            mt: false,\n            mb: false,\n            ml: false,\n            mr: false,\n            bl: false,\n            br: false,\n            tl: false,\n            tr: false,\n            mtr: false,\n        });\n    },\n\n    relativeScalingControlsOnly(object) {\n        object.setControlsVisibility({\n            mt: false,\n            mb: false,\n            ml: false,\n            mr: false,\n            bl: true,\n            br: true,\n            tl: true,\n            tr: true,\n            mtr: true,\n        });\n    },\n\n    // Canvas snapping functionality\n    enableSnap(canvasInstance, snapZone = null) {\n        console.log('[CanvasUtils.enableSnap] Initializing snap with canvas:', canvasInstance ? 'defined' : 'undefined');\n\n        if (!snapZone) {\n            snapZone = canvasInstance.width / AppConstants.CANVAS.SNAP_ZONE_RATIO;\n        }\n\n        console.log('[CanvasUtils.enableSnap] Snap zone calculated:', snapZone);\n\n        canvasInstance.on(\"object:moving\", function (options) {\n            const target = options.target;\n\n            // Skip if not eligible for snapping\n            if (target === contentImage || target === logo || target === logoName) {\n                return;\n            }\n\n            // Safety check for getCenterPoint method\n            if (!target || typeof target.getCenterPoint !== 'function') {\n                return;\n            }\n\n            const objectCenter = target.getCenterPoint();\n            const canvasCenter = canvasInstance.width / 2;\n            const distanceFromCenter = Math.abs(objectCenter.x - canvasCenter);\n\n            if (distanceFromCenter < snapZone) {\n                // Store center point before adjustment\n                const centerBefore = target.getCenterPoint();\n\n                // Calculate horizontal adjustment needed to center\n                const deltaX = canvasCenter - centerBefore.x;\n\n                // Apply adjustment while preserving vertical position\n                target.set({\n                    left: target.left + deltaX\n                });\n                target.setCoords();\n\n                // Verify center after adjustment\n                const centerAfter = target.getCenterPoint();\n\n                console.log(\n                    '%c[SNAP] CENTER SNAP',\n                    'background: #8ab414; color: white; font-weight: bold; padding: 2px 6px;',\n                    '\\n  Object type:', target.type,\n                    '\\n  Center before:', `(${centerBefore.x.toFixed(2)}, ${centerBefore.y.toFixed(2)})`,\n                    '\\n  Center after:', `(${centerAfter.x.toFixed(2)}, ${centerAfter.y.toFixed(2)})`,\n                    '\\n  Canvas center:', canvasCenter.toFixed(2),\n                    '\\n  Adjustment:', deltaX.toFixed(2) + 'px',\n                    '\\n  Snap zone:', snapZone.toFixed(2) + 'px'\n                );\n            }\n        });\n    },\n\n    // Rotation snapping functionality - snaps in real-time during rotation\n    enableRotationSnap(canvasInstance, tolerance = null) {\n        console.log('[CanvasUtils.enableRotationSnap] Initializing rotation snap with canvas:', canvasInstance ? 'defined' : 'undefined');\n\n        if (!tolerance) {\n            tolerance = AppConstants.CANVAS.ROTATION_SNAP_TOLERANCE;\n        }\n\n        const snapAngles = AppConstants.CANVAS.ROTATION_SNAP_ANGLES;\n        console.log('[CanvasUtils.enableRotationSnap] Tolerance:', tolerance, 'Snap angles:', snapAngles);\n\n        // Use object:rotating for real-time snapping while mouse is down\n        canvasInstance.on(\"object:rotating\", function (e) {\n            const target = e.target;\n\n            if (!target) {\n                return;\n            }\n\n            // Exclude protected objects from rotation snapping\n            if (target === contentImage || target === logo || target === logoName) {\n                return;\n            }\n\n            // Safety check for getCenterPoint method\n            if (typeof target.getCenterPoint !== 'function') {\n                return;\n            }\n\n            // Normalize angle to 0-360 range\n            let currentAngle = target.angle % 360;\n            if (currentAngle < 0) {\n                currentAngle += 360;\n            }\n\n            // Find closest snap angle\n            let closestAngle = null;\n            let minDifference = Infinity;\n\n            for (const snapAngle of snapAngles) {\n                // Calculate difference considering angle wrapping\n                let difference = Math.abs(currentAngle - snapAngle);\n\n                // Handle wrap-around (e.g., 359\u00B0 to 0\u00B0)\n                if (difference > 180) {\n                    difference = 360 - difference;\n                }\n\n                if (difference < minDifference) {\n                    minDifference = difference;\n                    closestAngle = snapAngle;\n                }\n            }\n\n            // Apply snap if within tolerance\n            if (closestAngle !== null && minDifference <= tolerance) {\n                // Store visual center point BEFORE rotation change\n                const centerBefore = target.getCenterPoint();\n\n                // Apply rotation snap\n                target.set({ angle: closestAngle });\n\n                // Get visual center point AFTER rotation change\n                const centerAfter = target.getCenterPoint();\n\n                // Calculate position adjustment to restore visual center\n                const deltaX = centerBefore.x - centerAfter.x;\n                const deltaY = centerBefore.y - centerAfter.y;\n\n                // Restore original visual position\n                target.set({\n                    left: target.left + deltaX,\n                    top: target.top + deltaY\n                });\n\n                target.setCoords();\n\n                // Only log once per snap (reduce console spam)\n                if (!target._isSnapped || target._snappedTo !== closestAngle) {\n                    console.log(\n                        '%c[SNAP] ROTATION SNAP',\n                        'background: #e10078; color: white; font-weight: bold; padding: 2px 6px;',\n                        '\\n  Object type:', target.type,\n                        '\\n  Original angle:', currentAngle.toFixed(2) + '\u00B0',\n                        '\\n  Snapped to:', closestAngle + '\u00B0',\n                        '\\n  Difference:', minDifference.toFixed(2) + '\u00B0',\n                        '\\n  Tolerance:', tolerance + '\u00B0',\n                        '\\n  Center before:', `(${centerBefore.x.toFixed(2)}, ${centerBefore.y.toFixed(2)})`,\n                        '\\n  Center after:', `(${centerAfter.x.toFixed(2)}, ${centerAfter.y.toFixed(2)})`,\n                        '\\n  Position adjustment:', `(${deltaX.toFixed(2)}, ${deltaY.toFixed(2)})`\n                    );\n                }\n                target._isSnapped = true;\n                target._snappedTo = closestAngle;\n            } else {\n                // Clear snap state when outside tolerance\n                target._isSnapped = false;\n                target._snappedTo = null;\n            }\n        });\n    },\n\n    // Picture movement constraints\n    enablePictureMove(canvasInstance) {\n        canvasInstance.on(\"object:moving\", function (options) {\n            if (options.target === contentImage) {\n                const imageRelatedHeight = options.target.height * (contentRect.width / contentImage.width);\n                const imageRelatedWidth = options.target.width * (contentRect.height / contentImage.height);\n\n                const maxTop = contentImage.top - contentRect.top - contentRect.height;\n                const maxLeft = contentImage.left - contentRect.left - contentRect.width;\n\n                // Snap to top if dragged beyond and image is larger than height\n                if (\n                    options.target.top > contentRect.top &&\n                    imageRelatedHeight > contentRect.height\n                ) {\n                    options.target\n                        .set({ top: contentRect.top })\n                        .setCoords();\n                }\n\n                // Snap to left if dragged beyond and image is wider than width\n                if (\n                    options.target.left > contentRect.left &&\n                    imageRelatedWidth > contentRect.width\n                ) {\n                    options.target\n                        .set({ left: contentRect.left })\n                        .setCoords();\n                }\n\n                // Snap to max boundaries\n                if (\n                    imageRelatedHeight > contentRect.height &&\n                    imageRelatedHeight < maxTop * -1\n                ) {\n                    options.target\n                        .set({\n                            top: contentRect.height - imageRelatedHeight + contentRect.top,\n                        })\n                        .setCoords();\n                }\n\n                if (\n                    imageRelatedWidth > contentRect.width &&\n                    imageRelatedWidth < maxLeft * -1\n                ) {\n                    options.target\n                        .set({\n                            left: contentRect.width - imageRelatedWidth + contentRect.left,\n                        })\n                        .setCoords();\n                }\n            }\n        });\n    },\n\n    // Background image positioning\n    positionBackgroundImage() {\n        if (contentImage != null) {\n            canvas.remove(contentRect);\n            canvas.remove(contentImage);\n            \n            contentImage.selectable = true;\n            contentImage.top = contentRect.top;\n            contentImage.left = contentRect.left;\n            this.disableScalingControls(contentImage);\n\n            const clipRect = new fabric.Rect({\n                left: contentRect.left,\n                top: contentRect.top,\n                width: contentRect.width,\n                height: contentRect.height,\n                absolutePositioned: true,\n            });\n\n            if (contentRect.width > contentRect.height) {\n                contentImage.scaleToWidth(contentRect.width);\n                contentImage.lockMovementX = true;\n                contentImage.lockMovementY = false;\n            } else if (\n                contentRect.width < contentRect.height ||\n                contentImage.width > contentImage.height\n            ) {\n                contentImage.scaleToHeight(contentRect.height);\n                contentImage.lockMovementY = true;\n                contentImage.lockMovementX = false;\n            } else {\n                contentImage.scaleToWidth(contentRect.width);\n                contentImage.lockMovementX = true;\n                contentImage.lockMovementY = false;\n            }\n            \n            contentImage.clipPath = clipRect;\n            canvas.add(contentImage);\n            canvas.sendToBack(contentImage);\n            canvas.centerObjectH(contentImage);\n        }\n    },\n\n    // Logo management\n    bringLogoToFront() {\n        if (logo) canvas.bringToFront(logo);\n        if (logoName) canvas.bringToFront(logoName);\n    },\n\n    // Circle clipping utility\n    applyCircleClip(activeObject, sizePercentage = 0.7) {\n        if (!activeObject) return false;\n\n        const isValidForCircle = \n            activeObject &&\n            activeObject !== contentImage &&\n            activeObject !== contentRect &&\n            activeObject !== logo &&\n            activeObject !== logoName &&\n            (activeObject.type === \"image\" ||\n             activeObject.type === \"rect\" ||\n             activeObject.type === \"circle\");\n\n        if (!isValidForCircle) return false;\n\n        const originalWidth = activeObject.width;\n        const originalHeight = activeObject.height;\n        const smallestOriginalDimension = Math.min(originalHeight, originalWidth);\n        const radius = (smallestOriginalDimension * sizePercentage) / 2;\n\n        if (activeObject.clipPath) {\n            activeObject.clipPath = null;\n        } else {\n            const clipPath = new fabric.Circle({\n                radius: radius,\n                left: 0,\n                top: 0,\n                originX: \"center\",\n                originY: \"center\",\n            });\n            activeObject.clipPath = clipPath;\n        }\n\n        canvas.renderAll();\n        return true;\n    },\n\n    // Canvas export with DPI handling\n    exportCanvas(format, quality, targetDPI = 200) {\n        const screenDPI = 72;\n        const maxPixels = 250000000;\n\n        const baseMultiplier = targetDPI / screenDPI;\n        const finalWidth = canvas.width * baseMultiplier;\n        const finalHeight = canvas.height * baseMultiplier;\n        const totalPixels = finalWidth * finalHeight;\n\n        let actualMultiplier = baseMultiplier;\n        let actualDPI = targetDPI;\n\n        if (totalPixels > maxPixels) {\n            actualMultiplier = Math.sqrt(maxPixels / (canvas.width * canvas.height));\n            actualDPI = Math.round(actualMultiplier * screenDPI);\n            console.warn(`Canvas too large for ${targetDPI} DPI. Reduced to ${actualDPI} DPI`);\n        }\n\n        try {\n            const dataURL = canvas.toDataURL({\n                format: format,\n                quality: quality,\n                multiplier: actualMultiplier,\n            });\n\n            if (dataURL === \"data:,\") {\n                throw new Error(\"Canvas export failed - empty result\");\n            }\n\n            return { dataURL, actualDPI, targetDPI };\n        } catch (error) {\n            console.error(\"Canvas export error:\", error);\n            throw error;\n        }\n    }\n};\n\n// Make available globally\nwindow.CanvasUtils = CanvasUtils;\n\n// === resources/js/event-handlers.js ===\n// Event Handler Utilities - Centralized event handling patterns\n\nconst EventHandlerUtils = {\n    // Generic event binding utility\n    bindHandler(selector, event, handler) {\n        jQuery(selector).off(event).on(event, handler);\n    },\n\n    // Batch event binding\n    bindHandlers(handlerMap) {\n        Object.keys(handlerMap).forEach(selector => {\n            const handlers = handlerMap[selector];\n            Object.keys(handlers).forEach(event => {\n                this.bindHandler(selector, event, handlers[event]);\n            });\n        });\n    },\n\n    // Canvas object handlers\n    setupCanvasObjectHandlers() {\n        const handlers = {\n            '#text': {\n                'input': function() {\n                    setValue(\"text\", jQuery(this).val());\n                }\n            },\n            '#scale': {\n                'input': function() {\n                    const activeObject = canvas.getActiveObject();\n                    if (activeObject && activeObject !== contentImage) {\n                        activeObject.scale(parseFloat(this.value)).setCoords();\n                        canvas.renderAll();\n                        updateScale(activeObject);\n                    }\n                }\n            },\n            '#text-color': {\n                'change': function() {\n                    const activeObject = canvas.getActiveObject();\n                    if (activeObject && activeObject.get('type') === \"text\") {\n                        setValue(\"fill\", jQuery(this).find(\":selected\").attr('value'));\n                    }\n                }\n            },\n            'input[name=\"align\"]': {\n                'change': function() {\n                    const alignValue = jQuery(this).attr('id');\n                    setValue(\"textAlign\", alignValue);\n                    jQuery(this).parent().trigger('update-status');\n                }\n            },\n            '#stroke-width': {\n                'input': function() {\n                    const width = jQuery(this).val();\n                    setValue(\"strokeWidth\", width == 0 ? null : width);\n                }\n            },\n            '#shadow-depth': {\n                'input': function() {\n                    setValue(\"shadow\", createShadow('black', jQuery(this).val()));\n                }\n            },\n            '#font-style-select': {\n                'change': function() {\n                    const activeObject = canvas.getActiveObject();\n                    if (activeObject && activeObject.get('type') === \"text\") {\n                        const selectedFont = jQuery(this).val();\n                        setValue(\"fontFamily\", selectedFont);\n                    }\n                }\n            },\n            '#line-height': {\n                'change': function() {\n                    const activeObject = canvas.getActiveObject();\n                    if (activeObject && activeObject.get('type') === \"text\") {\n                        const lineHeight = parseFloat(jQuery(this).val());\n                        setValue(\"lineHeight\", lineHeight);\n                    }\n                }\n            }\n        };\n\n        this.bindHandlers(handlers);\n    },\n\n    // Main application handlers\n    setupMainAppHandlers() {\n        const handlers = {\n            '#canvas-template': {\n                'change': function() {\n                    replaceCanvas();\n                    if (typeof updateCanvasDimensions === \"function\") {\n                        setTimeout(() => {\n                            updateCanvasDimensions();\n                        }, 100);\n                    }\n                }\n            },\n            '#logo-selection': {\n                'change': function() {\n                    // Only add logo if feature is enabled\n                    if (LogoState.isLogoEnabled()) {\n                        addLogo();\n                    }\n                }\n            },\n            '#scale-direction': {\n                'change': function() {\n                    CanvasUtils.positionBackgroundImage();\n                }\n            },\n            '#remove-element': {\n                'click': function() {\n                    const activeObject = canvas.getActiveObject();\n                    if (activeObject && \n                        activeObject !== contentImage && \n                        activeObject !== logo) {\n                        canvas.remove(activeObject);\n                    }\n                }\n            },\n            '#bring-to-front': {\n                'click': function() {\n                    const activeObject = canvas.getActiveObject();\n                    if (activeObject && \n                        activeObject !== contentImage && \n                        activeObject !== contentRect) {\n                        canvas.bringToFront(activeObject);\n                        CanvasUtils.bringLogoToFront();\n                        canvas.renderAll();\n                    }\n                }\n            }\n        };\n\n        this.bindHandlers(handlers);\n    },\n\n    // Text creation handler\n    setupTextHandler() {\n        this.bindHandler('#add-text', 'click', function() {\n            const textValidation = ValidationUtils.validateTextInput(jQuery(\"#text\").val());\n            \n            if (!textValidation.isValid) {\n                showAlert(\"Error! \" + textValidation.error);\n                return;\n            }\n\n            const initialFontSize = canvas.width / 2;\n            const selectedFont = jQuery(\"#font-style-select\").val() || \"Gotham Narrow Ultra\";\n            \n            const text = new fabric.Text(jQuery(\"#text\").val(), {\n                fontFamily: selectedFont,\n                fontSize: initialFontSize,\n                fontStyle: \"normal\",\n                textAlign: jQuery('input[name=\"align\"]:checked').val(),\n                fill: jQuery(\"#text-color\").find(\":selected\").attr(\"value\"),\n                stroke: \"#000000\",\n                strokeWidth: 0,\n                shadow: createShadow(\"#000000\", jQuery(\"#shadow-depth\").val()),\n                objectCaching: false,\n                lineHeight: parseFloat(jQuery(\"#line-height\").val()) || 1.0,\n                centeredScaling: false,\n                selectable: true,\n                moveable: true,\n                hasControls: true,\n                hasBorders: true,\n                perPixelTargetFind: true,\n            });\n\n            canvas.add(text);\n            CanvasUtils.relativeScalingControlsOnly(text);\n            CanvasUtils.scaleElementToFit(text, 0.8, 0.5);\n            canvas.centerObject(text);\n            text.set({\n                top: canvas.height / 2 - text.getScaledHeight() / 2,\n            });\n\n            text.setCoords();\n            canvas.setActiveObject(text);\n            updateScale(text);\n            canvas.renderAll();\n        });\n    },\n\n    // Image upload handler\n    setupImageUploadHandler() {\n        this.bindHandler('#add-image', 'input', function() {\n            const file = this.files[0];\n            if (!file) return;\n\n            const fileValidation = ValidationUtils.isValidImageFile(file);\n            jQuery(\"#add-image\").val(\"\");\n\n            if (!fileValidation) {\n                showAlert(\"Error! Invalid Image\");\n                return;\n            }\n\n            const reader = new FileReader();\n            reader.onload = function() {\n                const image = new Image();\n                image.src = reader.result;\n                image.onload = function() {\n                    fabric.Image.fromURL(reader.result, function(fabricImage) {\n                        CanvasUtils.scaleElementToFit(fabricImage, 0.5, 0.4);\n                        CanvasUtils.relativeScalingControlsOnly(fabricImage);\n                        canvas.add(fabricImage).setActiveObject(fabricImage);\n                        canvas.centerObject(fabricImage);\n                        updateScale(fabricImage);\n                        CanvasUtils.bringLogoToFront();\n                    }, {\n                        opacity: jQuery(\"#opacity\").val(),\n                    });\n                };\n            };\n            reader.readAsDataURL(file);\n        });\n    },\n\n    // Circle clip handler\n    setupCircleClipHandler() {\n        this.bindHandler('#add-circle', 'click', function() {\n            const activeObject = canvas.getActiveObject();\n            const sizeString = jQuery(\"#circle-radius\").val();\n            const size = parseInt(sizeString) || 2;\n\n            const validation = ValidationUtils.validateCircleClipTarget(activeObject);\n            \n            if (!validation.isValid) {\n                showAlert(validation.error, validation.type || 'warning');\n                return;\n            }\n\n            // Map size values to percentages\n            const sizePercentageMap = {\n                2: 0.9, // Gro\u00DF - 90%\n                3: 0.7, // Mittel - 70%\n                4: 0.5  // Klein - 50%\n            };\n            \n            const sizePercentage = sizePercentageMap[size] || 0.7;\n            CanvasUtils.applyCircleClip(activeObject, sizePercentage);\n        });\n    },\n\n    // Pink circle handler\n    setupPinkCircleHandler() {\n        this.bindHandler('#add-pink-circle', 'click', function() {\n            const radius = contentRect.width / 4;\n            const pinkCircle = new fabric.Circle({\n                top: contentRect.height / 3,\n                left: contentRect.width / 3,\n                radius: radius,\n                fill: \"rgb(225,0,120)\",\n            });\n            \n            CanvasUtils.scaleElementToFit(pinkCircle, 0.3, 0.3);\n            CanvasUtils.relativeScalingControlsOnly(pinkCircle);\n            canvas.add(pinkCircle);\n            \n            // Bring text objects to front\n            canvas.getObjects().forEach(object => {\n                if (object.get(\"type\") === \"text\") {\n                    canvas.bringToFront(object);\n                }\n            });\n            \n            canvas.renderAll();\n        });\n    },\n\n    // Cross/check mark handler\n    setupCrossHandler() {\n        this.bindHandler('#add-cross', 'click', function() {\n            fabric.Image.fromURL(\n                generatorApplicationURL + \"resources/images/Ankreuzen.png\",\n                function(image) {\n                    CanvasUtils.scaleElementToFit(image, 0.4, 0.3);\n                    canvas.add(image);\n                    canvas.centerObject(image);\n                    canvas.bringToFront(image);\n                }\n            );\n        });\n    },\n\n    // QR Code handler\n    setupQRCodeHandler() {\n        this.bindHandler('#add-qr-code', 'click', function() {\n            const qrText = jQuery(\"#qr-text\").val().trim();\n            const validation = ValidationUtils.validateQRInput(qrText);\n            \n            if (!validation.isValid) {\n                showAlert(\"Error! \" + validation.error);\n                return;\n            }\n\n            const tempDiv = document.createElement(\"div\");\n            tempDiv.style.display = \"none\";\n            document.body.appendChild(tempDiv);\n\n            try {\n                const targetQRSize = Math.max(512, Math.min(2048, Math.floor(canvas.width / 4)));\n                const qrColor = jQuery(\"#qr-color\").val() || \"#000000\";\n                \n                const qr = new QRCode(tempDiv, {\n                    text: qrText,\n                    width: targetQRSize,\n                    height: targetQRSize,\n                    colorDark: qrColor,\n                    colorLight: \"#ffffff\",\n                    correctLevel: QRCode.CorrectLevel.M,\n                });\n\n                setTimeout(function() {\n                    const qrImg = tempDiv.querySelector(\"img\");\n                    if (qrImg) {\n                        const borderPercent = 0.05;\n                        const borderSize = Math.floor(targetQRSize * borderPercent);\n                        const totalSize = targetQRSize + borderSize * 2;\n\n                        const tempCanvas = document.createElement(\"canvas\");\n                        tempCanvas.width = totalSize;\n                        tempCanvas.height = totalSize;\n                        const ctx = tempCanvas.getContext(\"2d\");\n\n                        ctx.fillStyle = \"#ffffff\";\n                        ctx.fillRect(0, 0, totalSize, totalSize);\n                        ctx.drawImage(qrImg, borderSize, borderSize, targetQRSize, targetQRSize);\n\n                        fabric.Image.fromURL(tempCanvas.toDataURL(), function(qrImage) {\n                            CanvasUtils.scaleElementToFit(qrImage, 0.25, 0.25);\n                            CanvasUtils.relativeScalingControlsOnly(qrImage);\n                            canvas.add(qrImage).setActiveObject(qrImage);\n                            canvas.centerObject(qrImage);\n                            updateScale(qrImage);\n                            CanvasUtils.bringLogoToFront();\n                            document.body.removeChild(tempDiv);\n                        });\n                    } else {\n                        showAlert(\"Error generating QR Code image\");\n                        document.body.removeChild(tempDiv);\n                    }\n                }, 100);\n            } catch (error) {\n                showAlert(\"Error generating QR Code: \" + error.message);\n                document.body.removeChild(tempDiv);\n            }\n        });\n    },\n\n    // Download handler\n    setupDownloadHandler() {\n        this.bindHandler('#generate-meme', 'click', function() {\n            const validation = ValidationUtils.validateDownload();\n\n            if (!validation.isValid) {\n                alert(validation.error);\n                return;\n            }\n\n            if (confirm(\"Hast du das Copyright bei Fotos \u00FCberpr\u00FCft und angegeben und das Impressum wo notwendig hinzugef\u00FCgt?\")) {\n                const currentTemplate = template_values[template];\n                const targetDPI = currentTemplate.dpi || 200;\n                const format = jQuery(\"#image-format\").find(\":selected\").attr(\"value\");\n                const quality = parseFloat(jQuery(\"#image-quality\").find(\":selected\").attr(\"value\"));\n\n                try {\n                    const exportResult = CanvasUtils.exportCanvas(format, quality, targetDPI);\n\n                    const link = document.createElement(\"a\");\n                    link.href = exportResult.dataURL;\n                    link.download = createImgName();\n                    link.click();\n\n                    if (exportResult.actualDPI < exportResult.targetDPI) {\n                        alert(`Download erfolgreich mit ${exportResult.actualDPI} DPI (reduziert von ${exportResult.targetDPI} DPI f\u00FCr Kompatibilit\u00E4t)`);\n                    }\n                } catch (error) {\n                    alert(\"Fehler beim Erstellen des Bildes. Das Format ist m\u00F6glicherweise zu gro\u00DF f\u00FCr diesen Browser.\");\n                }\n            }\n        });\n    },\n\n    // Logo toggle handler\n    setupLogoToggleHandler() {\n        this.bindHandler('#logo-toggle', 'change', function() {\n            const isChecked = jQuery(this).is(':checked');\n            LogoState.setLogoEnabled(isChecked);\n\n            if (isChecked) {\n                // Re-add logo\n                addLogo();\n\n                // Re-enable logo selection dropdown\n                jQuery('#logo-selection').prop('disabled', false).removeClass('opacity-50');\n            } else {\n                // Remove logo from canvas\n                if (logo != null) {\n                    canvas.remove(logo);\n                    canvas.remove(logoName);\n                    logo = null;\n                    logoName = null;\n                    canvas.renderAll();\n                }\n\n                // Disable logo selection dropdown\n                jQuery('#logo-selection').prop('disabled', true).addClass('opacity-50');\n            }\n        });\n    },\n\n    // Initialize all handlers\n    initializeAllHandlers() {\n        this.setupCanvasObjectHandlers();\n        this.setupMainAppHandlers();\n        this.setupTextHandler();\n        this.setupImageUploadHandler();\n        this.setupCircleClipHandler();\n        this.setupPinkCircleHandler();\n        this.setupCrossHandler();\n        this.setupQRCodeHandler();\n        this.setupDownloadHandler();\n        this.setupLogoToggleHandler();\n    }\n};\n\n// Make available globally\nwindow.EventHandlerUtils = EventHandlerUtils;\n\n// === resources/js/modal.js ===\n// Modal functionality\njQuery(function() {\n    // Video modal functionality\n    jQuery('#video-modal-btn').on('click', function() {\n        const videoUrl = jQuery(this).data('video');\n        jQuery('#video-iframe').attr('src', videoUrl);\n        jQuery('#videoModal').removeClass('hidden');\n        jQuery('body').addClass('overflow-hidden');\n    });\n\n    // Close modal functionality\n    jQuery('#close-modal').on('click', function(e) {\n        jQuery('#videoModal').addClass('hidden');\n        jQuery('#video-iframe').attr('src', '');\n        jQuery('body').removeClass('overflow-hidden');\n    });\n    \n    // Close modal when clicking background\n    jQuery('#videoModal').on('click', function(e) {\n        if (e.target === this) {\n            jQuery('#videoModal').addClass('hidden');\n            jQuery('#video-iframe').attr('src', '');\n            jQuery('body').removeClass('overflow-hidden');\n        }\n    });\n\n    // Close modal on escape key\n    jQuery(document).on('keydown', function(e) {\n        if (e.key === 'Escape') {\n            jQuery('#videoModal').addClass('hidden');\n            jQuery('#video-iframe').attr('src', '');\n            jQuery('body').removeClass('overflow-hidden');\n        }\n    });\n});\n\n// Button group functionality\njQuery(function() {\n    jQuery('.btn-group label').on('click', function() {\n        const $label = jQuery(this);\n        const $group = $label.closest('.btn-group');\n        const $radio = $label.find('input[type=\"radio\"]');\n        \n        // Remove active class from siblings\n        $group.find('label').removeClass('active').removeClass('bg-gruene-secondary');\n        \n        // Add active class to clicked label\n        $label.addClass('active').addClass('bg-gruene-secondary');\n        \n        // Check the radio button and trigger change event\n        $radio.prop('checked', true).trigger('change');\n        \n        console.log('Alignment button clicked:', $radio.attr('id'), 'value:', $radio.val());\n    });\n});\n\n// Alert functionality now handled by centralized AlertSystem\n\n// === resources/js/searchable-select.js ===\n// Searchable Select Component\nclass SearchableSelect {\n    constructor(element, options = {}) {\n        this.element = jQuery(element);\n        this.options = {\n            placeholder: 'Select an option...',\n            searchPlaceholder: 'Search...',\n            noResultsText: 'No results found',\n            ...options\n        };\n        \n        this.isOpen = false;\n        this.selectedValue = '';\n        this.selectedText = '';\n        this.originalOptions = [];\n        \n        this.init();\n    }\n    \n    init() {\n        // Store original options\n        this.storeOriginalOptions();\n        \n        // Create custom select structure\n        this.createCustomSelect();\n        \n        // Hide original select\n        this.element.hide();\n        \n        // Bind events\n        this.bindEvents();\n        \n        // Set initial value\n        const initialValue = this.element.val();\n        if (initialValue) {\n            this.selectOption(initialValue);\n        }\n    }\n    \n    storeOriginalOptions() {\n        this.originalOptions = [];\n        \n        this.element.find('optgroup, option').each((index, el) => {\n            const $el = jQuery(el);\n            \n            if (el.tagName === 'OPTGROUP') {\n                this.originalOptions.push({\n                    type: 'group',\n                    label: $el.attr('label'),\n                    options: []\n                });\n            } else {\n                const option = {\n                    type: 'option',\n                    value: $el.attr('value') || '',\n                    text: $el.text(),\n                    selected: $el.prop('selected')\n                };\n                \n                if (this.originalOptions.length > 0 && this.originalOptions[this.originalOptions.length - 1].type === 'group') {\n                    this.originalOptions[this.originalOptions.length - 1].options.push(option);\n                } else {\n                    this.originalOptions.push(option);\n                }\n            }\n        });\n    }\n    \n    createCustomSelect() {\n        const customSelect = `\n            <div class=\"searchable-select\">\n                <button type=\"button\" class=\"searchable-select-button\" aria-expanded=\"false\">\n                    <span class=\"searchable-select-text\">${this.options.placeholder}</span>\n                    <span class=\"searchable-select-chevron\">\n                        <svg class=\"h-5 w-5 text-gray-400 transform transition-transform\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                            <path fill-rule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clip-rule=\"evenodd\" />\n                        </svg>\n                    </span>\n                </button>\n                <div class=\"searchable-select-dropdown hidden\">\n                    <input type=\"text\" class=\"searchable-select-search\" placeholder=\"${this.options.searchPlaceholder}\">\n                    <div class=\"searchable-select-options\">\n                        ${this.renderOptions()}\n                    </div>\n                </div>\n            </div>\n        `;\n        \n        this.customSelect = jQuery(customSelect);\n        this.element.after(this.customSelect);\n        \n        // Cache elements\n        this.button = this.customSelect.find('.searchable-select-button');\n        this.dropdown = this.customSelect.find('.searchable-select-dropdown');\n        this.searchInput = this.customSelect.find('.searchable-select-search');\n        this.optionsContainer = this.customSelect.find('.searchable-select-options');\n        this.textElement = this.customSelect.find('.searchable-select-text');\n    }\n    \n    renderOptions(searchTerm = '') {\n        let html = '';\n        \n        this.originalOptions.forEach(item => {\n            if (item.type === 'group') {\n                const groupOptions = item.options.filter(opt => {\n                    // Search in both display text and original value (which may contain %)\n                    const searchLower = searchTerm.toLowerCase();\n                    const textMatch = opt.text.toLowerCase().includes(searchLower);\n                    const valueMatch = opt.value.toLowerCase().includes(searchLower);\n                    // Also search in value with % replaced by space for better matching\n                    const valueWithSpace = opt.value.replace(/%/g, ' ').toLowerCase();\n                    const valueSpaceMatch = valueWithSpace.includes(searchLower);\n                    return textMatch || valueMatch || valueSpaceMatch;\n                });\n                \n                if (groupOptions.length > 0) {\n                    html += `<div class=\"searchable-select-option-group\">${item.label}</div>`;\n                    groupOptions.forEach(option => {\n                        const selectedClass = option.value === this.selectedValue ? 'selected' : '';\n                        html += `<div class=\"searchable-select-option ${selectedClass}\" data-value=\"${option.value}\">${option.text}</div>`;\n                    });\n                }\n            } else if (item.type === 'option') {\n                // Search in both display text and original value (which may contain %)\n                const searchLower = searchTerm.toLowerCase();\n                const textMatch = item.text.toLowerCase().includes(searchLower);\n                const valueMatch = item.value.toLowerCase().includes(searchLower);\n                // Also search in value with % replaced by space for better matching\n                const valueWithSpace = item.value.replace(/%/g, ' ').toLowerCase();\n                const valueSpaceMatch = valueWithSpace.includes(searchLower);\n                \n                if (textMatch || valueMatch || valueSpaceMatch) {\n                    const selectedClass = item.value === this.selectedValue ? 'selected' : '';\n                    html += `<div class=\"searchable-select-option ${selectedClass}\" data-value=\"${item.value}\">${item.text}</div>`;\n                }\n            }\n        });\n        \n        if (html === '' && searchTerm !== '') {\n            html = `<div class=\"px-3 py-2 text-gray-500 text-sm\">${this.options.noResultsText}</div>`;\n        }\n        \n        return html;\n    }\n    \n    bindEvents() {\n        // Toggle dropdown\n        this.button.on('click', (e) => {\n            e.preventDefault();\n            this.toggle();\n        });\n        \n        // Close on outside click\n        jQuery(document).on('click', (e) => {\n            if (!this.customSelect.is(e.target) && this.customSelect.has(e.target).length === 0) {\n                this.close();\n            }\n        });\n        \n        // Search functionality\n        this.searchInput.on('input', (e) => {\n            const searchTerm = e.target.value;\n            this.optionsContainer.html(this.renderOptions(searchTerm));\n            this.bindOptionEvents();\n        });\n        \n        // Keyboard navigation\n        this.searchInput.on('keydown', (e) => {\n            if (e.key === 'Escape') {\n                this.close();\n            }\n        });\n        \n        // Initial option events\n        this.bindOptionEvents();\n    }\n    \n    bindOptionEvents() {\n        this.optionsContainer.find('.searchable-select-option').off('click').on('click', (e) => {\n            const value = jQuery(e.target).data('value');\n            const text = jQuery(e.target).text();\n            \n            this.selectOption(value, text);\n            this.close();\n        });\n    }\n    \n    selectOption(value, text = null) {\n        this.selectedValue = value;\n        \n        if (text === null) {\n            // Find text from original options\n            const findOption = (items) => {\n                for (let item of items) {\n                    if (item.type === 'group') {\n                        const found = findOption(item.options);\n                        if (found) return found;\n                    } else if (item.value === value) {\n                        return item;\n                    }\n                }\n                return null;\n            };\n            \n            const option = findOption(this.originalOptions);\n            text = option ? option.text : value;\n        }\n        \n        this.selectedText = text;\n        this.textElement.text(text || this.options.placeholder);\n        \n        // Update original select\n        this.element.val(value);\n        \n        // Trigger change event\n        this.element.trigger('change');\n        \n        // Update option states\n        this.updateOptionStates();\n    }\n    \n    updateOptionStates() {\n        this.optionsContainer.find('.searchable-select-option').removeClass('selected');\n        this.optionsContainer.find(`[data-value=\"${this.selectedValue}\"]`).addClass('selected');\n    }\n    \n    toggle() {\n        if (this.isOpen) {\n            this.close();\n        } else {\n            this.open();\n        }\n    }\n    \n    open() {\n        this.dropdown.removeClass('hidden');\n        this.button.attr('aria-expanded', 'true');\n        this.customSelect.find('.searchable-select-chevron svg').addClass('rotate-180');\n        this.isOpen = true;\n        \n        // Focus search input\n        setTimeout(() => {\n            this.searchInput.focus();\n        }, 10);\n        \n        // Clear search\n        this.searchInput.val('');\n        this.optionsContainer.html(this.renderOptions());\n        this.bindOptionEvents();\n    }\n    \n    close() {\n        this.dropdown.addClass('hidden');\n        this.button.attr('aria-expanded', 'false');\n        this.customSelect.find('.searchable-select-chevron svg').removeClass('rotate-180');\n        this.isOpen = false;\n    }\n    \n    // Method to refresh options (useful when options are added dynamically)\n    refresh() {\n        this.storeOriginalOptions();\n        this.optionsContainer.html(this.renderOptions());\n        this.bindOptionEvents();\n    }\n    \n    // Method to add options programmatically\n    addOption(value, text, groupLabel = null) {\n        const option = jQuery(`<option value=\"${value}\">${text}</option>`);\n        \n        if (groupLabel) {\n            let optgroup = this.element.find(`optgroup[label=\"${groupLabel}\"]`);\n            if (optgroup.length === 0) {\n                optgroup = jQuery(`<optgroup label=\"${groupLabel}\"></optgroup>`);\n                this.element.append(optgroup);\n            }\n            optgroup.append(option);\n        } else {\n            this.element.append(option);\n        }\n        \n        this.refresh();\n    }\n    \n    // Method to clear all options\n    clearOptions() {\n        this.element.empty().append('<option value=\"\">Select an option...</option>');\n        this.selectedValue = '';\n        this.selectedText = '';\n        this.textElement.text(this.options.placeholder);\n        this.refresh();\n    }\n}\n\n// jQuery plugin wrapper\njQuery.fn.searchableSelect = function(options) {\n    return this.each(function() {\n        if (!jQuery(this).data('searchable-select')) {\n            jQuery(this).data('searchable-select', new SearchableSelect(this, options));\n        }\n    });\n};\n\n// Auto-initialize searchable selects\njQuery(function() {\n    // Initialize logo selection as searchable\n    jQuery('#logo-selection').searchableSelect({\n        placeholder: 'Logo Ausw\u00E4hlen',\n        searchPlaceholder: 'Logo suchen...',\n        noResultsText: 'Keine Logos gefunden'\n    });\n});\n\n// === resources/js/initialization.js ===\n// Initialize UI components\njQuery(function() {\n    // Wait for fabric to be available before initializing canvas-dependent code\n    function waitForFabric() {\n        if (typeof fabric !== 'undefined') {\n            console.log('Fabric.js loaded, initializing application...');\n            \n            // Initialize the application now that fabric is available\n            if (typeof initializeApplication === 'function') {\n                initializeApplication();\n            }\n            \n            console.log('UI components initialized with Tailwind CSS');\n        } else {\n            console.log('Waiting for Fabric.js to load...');\n            setTimeout(waitForFabric, 50);\n        }\n    }\n    \n    waitForFabric();\n});\n\n// === resources/js/helpers.js ===\n// Legacy constants reference - use AppConstants instead\n\n// Canvas utilities\nfunction setValue(key, value) {\n    const activeObject = canvas.getActiveObject();\n    console.log('setValue called:', key, '=', value, 'on object:', activeObject);\n    \n    if (activeObject) {\n        activeObject.set(key, value);\n        canvas.renderAll();\n        console.log('Value set successfully. New value:', activeObject.get(key));\n    } else {\n        console.log('No active object to set value on');\n    }\n}\n\nfunction getBackgroundColor(color) {\n    return jQuery('#bg-option').hasClass('active') ? color : '';\n}\n\nfunction setBackgroundColor(color) {\n    setValue(\"textBackgroundColor\", getBackgroundColor(color));\n}\n\nfunction createShadow(color, width) {\n    return `${color} 2px 2px ${width}`;\n}\n\n// UI utilities\n// refreshSelectPicker function removed - no longer needed with Tailwind CSS\n\nfunction toggleTextMethods(enable) {\n    const $textMethods = jQuery('.text-method');\n    const $alignButtons = jQuery('.align');\n    \n    if (enable) {\n        $textMethods.attr('disabled', false);\n        $alignButtons.removeClass('disabled');\n    } else {\n        $textMethods.attr('disabled', 'disabled');\n        $alignButtons.addClass('disabled');\n    }\n}\n\nfunction disableTextMethods() {\n    toggleTextMethods(false);\n}\n\nfunction enableTextMethods() {\n    toggleTextMethods(true);\n}\n\n// Validation utilities - using centralized ValidationUtils\nfunction isImage(fileType) {\n    return ValidationUtils.isValidImage(fileType);\n}\n\n// File utilities\nfunction createImgName() {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let result = '';\n    \n    for (let i = 0; i < AppConstants.FILE.FILENAME_LENGTH; i++) {\n        result += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    \n    const format = jQuery('#image-format').find(\":selected\").attr('value');\n    return `${result}.${format}`;\n}\n\n// Alert utilities now handled by AlertSystem - see alert-system.js\n\n// === resources/js/choice-image.js ===\njQuery(function () {\n    // Event: Choice meme from gallery\n    jQuery('.memes-container').delegate('img', 'click', function () {\n        var $img = jQuery(this);\n        var imgInfo = {\n            url: $img.attr('src'),\n            height: $img.attr('img-height'),\n            width: $img.attr('img-width'),\n        };\n        processMeme(imgInfo);\n    });\n\n    // Event: Upload local image\n    jQuery('#meme-input').on('change', function () {\n        const file = this.files[0];\n        if (!file) return;\n        \n        const fileType = file.type;\n        jQuery('#meme-input').val(''); // Reset file input\n\n        if (!ValidationUtils.isValidImageFile(file)) {\n            showAlert('Error! Invalid Image');\n            return;\n        }\n\n        const reader = new FileReader();\n        reader.onload = function () {\n            var meme = new Image();\n            meme.onload = function () {\n                processMeme({\n                    url: reader.result,\n                    height: meme.height,\n                    width: meme.width,\n                });\n            };\n            meme.onerror = function () {\n                showAlert('Error loading image');\n            };\n            meme.src = reader.result;\n        };\n        reader.onerror = function () {\n            showAlert('Error reading file');\n        };\n        reader.readAsDataURL(file);\n    });\n});\n\n// === resources/js/handlers.js ===\n// Font management\nfunction loadFont(font) {\n    const customFonts = ['Gotham Narrow'];\n    const text = canvas.getActiveObject();\n    \n    if (!text) return;\n    \n    if (customFonts.includes(font)) {\n        const fontObserver = new FontFaceObserver(font);\n        fontObserver.load().then(function () {\n            text.set(\"fontFamily\", \"\");\n            text.set(\"fontFamily\", font);\n            canvas.renderAll();\n        });\n    } else {\n        text.set(\"fontFamily\", font);\n        canvas.renderAll();\n    }\n}\n\n// UI state management\nfunction updateInputs() {\n    const activeObject = canvas.getActiveObject();\n\n    if (activeObject && activeObject.get('type') === \"text\") {\n        enableTextMethods();\n        jQuery('#text').val(activeObject.text);\n        jQuery('#text-color').val(activeObject.fill);\n        jQuery('#line-height').val(activeObject.lineHeight);\n        jQuery('#font-style-select').val(activeObject.fontFamily);\n        jQuery(`input[value=\"${activeObject.textAlign}\"]`).parent().trigger('update-status');\n        updateScale(activeObject);\n    }\n}\n\nfunction updateScale(activeObject) {\n    const scale = Number(parseFloat(activeObject.scaleX)).toFixed(2);\n    jQuery('#scale').val(scale);\n}\n\n// Event handler utility - using centralized EventHandlerUtils\nfunction bindHandler(selector, event, handler) {\n    return EventHandlerUtils.bindHandler(selector, event, handler);\n}\n\n// Section toggle functionality\nfunction toggleSection(sectionId) {\n    const section = document.getElementById(sectionId);\n    const chevron = document.getElementById(sectionId + '-chevron');\n    const button = document.querySelector(`[onclick=\"toggleSection('${sectionId}')\"]`);\n    \n    if (section.style.display === 'none' || section.classList.contains('hidden')) {\n        // Show section\n        section.style.display = 'block';\n        section.classList.remove('hidden');\n        chevron.style.transform = 'rotate(0deg)';\n        button.setAttribute('aria-expanded', 'true');\n    } else {\n        // Hide section\n        section.style.display = 'none';\n        section.classList.add('hidden');\n        chevron.style.transform = 'rotate(-90deg)';\n        button.setAttribute('aria-expanded', 'false');\n    }\n}\n\n// Canvas object event handlers - now managed by EventHandlerUtils\nfunction loadObjectHandlers() {\n    EventHandlerUtils.setupCanvasObjectHandlers();\n}\n\n/*****************************\n * Handle edit buttons style *\n*****************************/\n\n// Update style of font-style buttons\njQuery('.edit-btn').on('update-status', function () {\n    if (jQuery(this).attr('data') == '') {\n        jQuery(this).removeClass('active')\n    } else {\n        jQuery(this).addClass('active')\n    }\n})\n\n//  Toggle font-style buttons\njQuery('#font-style .btn').on('click', function () {\n    if (jQuery(this).attr('data') == '') {\n        jQuery(this).addClass('active')\n        jQuery(this).attr('data', jQuery(this).attr('value'))\n    } else {\n        jQuery(this).removeClass('active')\n        jQuery(this).attr('data', '')\n    }\n    jQuery(this).trigger('change-value')\n})\n\n// Update style of text align buttons\njQuery('.align').on('update-status', function () {\n    jQuery('.align').removeClass('active')\n    jQuery(this).addClass('active')\n})\n\n// Expose functions to global scope for inline event handlers\nwindow.toggleSection = toggleSection;\n\n// === resources/js/main.js ===\n// Application state\nlet canvas;\nlet contentRect;\nlet contentImage;\nlet logo;\nlet logoName;\nlet logoText;\nlet scaleMax;\nlet template;\n\n// Application URL fallback - must be preserved for external scripts\nif (typeof generatorApplicationURL === \"undefined\") {\n  var generatorApplicationURL = \"\";\n}\n\n// Explicitly expose generatorApplicationURL to prevent minification\nwindow.generatorApplicationURL = generatorApplicationURL;\n\nfunction replaceCanvas() {\n  template = jQuery(\"#canvas-template\").find(\":selected\").attr(\"value\");\n\n  // Cleanup existing canvas\n  if (canvas) {\n    canvas.dispose();\n  }\n\n  const currentTemplate = TemplateConstants.getTemplate(template);\n  const { width, height, topBorderMultiplier, border } = currentTemplate;\n\n  // Setup responsive canvas container\n  function resizeCanvas() {\n    const wrapperWidth = jQuery(\".fabric-canvas-wrapper\").width();\n    const $container = jQuery(\".canvas-container\");\n    $container.css({\n      width: wrapperWidth,\n      height: (wrapperWidth * height) / width,\n    });\n  }\n\n  jQuery(window).off(\"resize.canvas\").on(\"resize.canvas\", resizeCanvas);\n\n  // Initialize fabric canvas\n  canvas = new fabric.Canvas(\"meme-canvas\", {\n    width,\n    height,\n    selection: true,\n    allowTouchScrolling: true,\n    backgroundColor: AppConstants.COLORS.BACKGROUND_PRIMARY,\n    preserveObjectStacking: true,\n    targetFindTolerance: AppConstants.CANVAS.TARGET_FIND_TOLERANCE,\n    perPixelTargetFind: true,\n  });\n\n  // Setup scale limits\n  scaleMax = canvas.width * AppConstants.CANVAS.SCALE_MAX_MULTIPLIER;\n  jQuery(\"#scale\").attr(\"max\", scaleMax);\n\n  // Calculate border distances\n  // For borderless templates (border: 0), borderDistance should be 0\n  const borderDistance = border > 0 ? canvas.width / border : 0;\n  const topDistance = borderDistance * topBorderMultiplier;\n\n  // Create content rectangle\n  contentRect = new fabric.Rect({\n    top: topDistance,\n    left: borderDistance,\n    width: canvas.width - borderDistance * 2,\n    height: canvas.height - (topDistance + borderDistance),\n    fill: AppConstants.COLORS.BACKGROUND_SECONDARY,\n    selectable: false,\n  });\n\n  canvas.add(contentRect);\n\n  // Initialize canvas features\n  console.log('[replaceCanvas] Initializing canvas features with canvas:', canvas ? 'defined' : 'undefined');\n  resizeCanvas();\n  CanvasUtils.enableSnap(canvas);\n  CanvasUtils.enableRotationSnap(canvas);\n  CanvasUtils.enablePictureMove(canvas);\n  enableScalingUpdates();\n\n  // Only add logo if enabled\n  if (LogoState.isLogoEnabled()) {\n    addLogo();\n  }\n\n  canvas.renderAll();\n\n  // Update dimensions display if the function exists (from wizard.js)\n  if (typeof updateCanvasDimensions === \"function\") {\n    setTimeout(() => {\n      updateCanvasDimensions();\n    }, 50);\n  }\n}\n\n/**\n * Calculate the optimal logo top position based on template configuration\n * For bordered templates: border should cut through pink bar at BORDER_CUT_RATIO of logo height\n * For borderless templates: logo bottom margin is BORDERLESS_MARGIN_PERCENT of canvas height\n */\nfunction calculateLogoTop(logoHeight, template) {\n  // Validate inputs\n  if (!canvas || !template) {\n    console.error('calculateLogoTop: canvas or template is not defined');\n    return 0;\n  }\n\n  if (typeof logoHeight !== 'number' || logoHeight <= 0) {\n    console.error('calculateLogoTop: invalid logoHeight', logoHeight);\n    return 0;\n  }\n\n  const borderDistance = template.border > 0 ? canvas.width / template.border : 0;\n\n  if (template.border > 0) {\n    // Bordered template: border should cut at BORDER_CUT_RATIO of logo height from logo top\n    const bottomBorderTop = canvas.height - borderDistance;\n    const logoTop = bottomBorderTop - (logoHeight * AppConstants.LOGO.BORDER_CUT_RATIO);\n    return logoTop;\n  } else {\n    // Borderless template: use percentage-based margin from canvas bottom\n    const marginFromBottom = canvas.height * AppConstants.LOGO.BORDERLESS_MARGIN_PERCENT;\n    const logoBottom = canvas.height - marginFromBottom;\n    const logoTop = logoBottom - logoHeight;\n    return logoTop;\n  }\n}\n\nfunction addLogo() {\n  // If logo is disabled, remove existing logo and return early\n  if (!LogoState.isLogoEnabled()) {\n    if (logo != null) {\n      canvas.remove(logo);\n      canvas.remove(logoName);\n      logo = null;\n      logoName = null;\n      canvas.renderAll();\n    }\n    return;\n  }\n\n  if (logo != null) {\n    canvas.remove(logo);\n    canvas.remove(logoName);\n  }\n\n  const scaleTo = (contentRect.width + contentRect.height) / AppConstants.LOGO.SCALE_RATIO;\n  logoText = (jQuery(\"#logo-selection\").find(\":selected\").attr(\"value\") || \"\")\n    .trim()\n    .toUpperCase();\n\n  let logoFilename, textScaleTo, isLongLogo;\n\n  // Check if text needs breaking (either has % or is too long)\n  if (logoText.includes(\"%\") || logoText.length > AppConstants.LOGO.MAX_TEXT_LENGTH) {\n    logoFilename = AppConstants.LOGO.FILES.LONG;\n    isLongLogo = true;\n\n    if (logoText.includes(\"%\")) {\n      // Split by % and trim each part to remove whitespace\n      const parts = logoText.split(\"%\").map(part => part.trim());\n      logoText = parts.join(\"\\n\");\n    } else if (logoText.length > AppConstants.LOGO.MAX_TEXT_LENGTH) {\n      // For long names without %, break at last space\n      const lastSpace = logoText.lastIndexOf(\" \");\n      if (lastSpace > 0) {\n        logoText = logoText.substring(0, lastSpace).trim() + \"\\n\" +\n                   logoText.substring(lastSpace).trim();\n      }\n    }\n\n    textScaleTo = AppConstants.LOGO.TEXT_SCALE_LONG;\n  } else {\n    logoFilename = AppConstants.LOGO.FILES.SHORT;\n    isLongLogo = false;\n    textScaleTo = AppConstants.LOGO.TEXT_SCALE_SHORT;\n  }\n\n  if (scaleTo < 121) {\n    logoFilename = logoFilename\n      .replace(\"245\", \"120\")\n      .replace(\"248\", \"121\")\n      .replace(\"268\", \"131\");\n  }\n\n  fabric.Image.fromURL(\n    generatorApplicationURL + \"resources/images/logos/\" + logoFilename,\n    function (image) {\n      // Error handling: Check if image loaded successfully\n      if (!image || !image.width || !image.height) {\n        console.error('Failed to load logo image:', logoFilename);\n        return;\n      }\n\n      try {\n        image.scaleToWidth(scaleTo);\n        image.lockMovementX = true;\n        image.lockMovementY = true;\n\n        // Calculate optimal logo position automatically based on template type\n        const logoHeight = image.getScaledHeight();\n        const template = currentTemplate();\n        image.top = calculateLogoTop(logoHeight, template);\n\n        CanvasUtils.disableScalingControls(image);\n        image.selectable = false;\n        canvas.add(image);\n        canvas.centerObjectH(image);\n        canvas.bringToFront(image);\n        logo = image;\n\n        // Calculate text position relative to logo top\n        // The pink bar starts at the same ABSOLUTE distance from the logo top in both variants\n        // Using logo WIDTH as reference since it's constant (245px) between short and long logos\n        const offsetFromTop = image.getScaledWidth() * AppConstants.LOGO.PINK_BAR_OFFSET_FROM_TOP;\n        const textTopPosition = image.top + offsetFromTop;\n\n        logoName = new fabric.Text(logoText, {\n          top: textTopPosition,\n          fontFamily: AppConstants.FONTS.DEFAULT_LOGO,\n          fontSize: Math.floor(image.getScaledWidth() / 10),\n          fontStyle: \"normal\",\n          textAlign: \"right\",\n          fill: AppConstants.COLORS.LOGO_TEXT,\n          stroke: AppConstants.COLORS.TEXT_STROKE,\n          strokeWidth: 0,\n          objectCaching: false,\n          lineHeight: AppConstants.LOGO.LINE_HEIGHT,\n          angle: AppConstants.LOGO.ANGLE,\n          selectable: false,\n        });\n\n        canvas.add(logoName);\n\n        const linebreak = logoText.lastIndexOf(\"\\n\");\n        if (linebreak > 17 || logoText.length - linebreak > 17) {\n          logoName.scaleToWidth(image.getScaledWidth() * AppConstants.LOGO.WIDTH_SCALE);\n          const topAdd = Math.floor((logoName.height - logoName.getScaledHeight()) / 2);\n          logoName.top = logoName.top + topAdd;\n        } else {\n          logoName.width = image.getScaledWidth() * AppConstants.LOGO.WIDTH_SCALE;\n        }\n\n        canvas.centerObjectH(logoName);\n        CanvasUtils.bringLogoToFront();\n        canvas.renderAll();\n      } catch (error) {\n        console.error('Error while adding logo to canvas:', error);\n      }\n    },\n    null, // crossOrigin\n    {\n      // Error callback for image loading failure\n      onError: function() {\n        console.error('Failed to load logo image file:', logoFilename);\n      }\n    }\n  );\n}\n\nfunction logo_to_front() {\n  CanvasUtils.bringLogoToFront();\n}\n\nfunction enableScalingUpdates() {\n  canvas.on(\"object:scaling\", function (options) {\n    console.log(\"isScaling\");\n    updateScale(options.target);\n  });\n}\n\nfunction enablePictureMove() {\n  CanvasUtils.enablePictureMove(canvas);\n}\n\nfunction disableScalingControls(object) {\n  CanvasUtils.disableScalingControls(object);\n}\n\nfunction relativeScalingControlsOnly(object) {\n  CanvasUtils.relativeScalingControlsOnly(object);\n}\n\nfunction enableSnap() {\n  CanvasUtils.enableSnap(canvas);\n}\n\n// Application initialization function - called after fabric is ready\nfunction initializeApplication() {\n  // Initialize canvas first\n  replaceCanvas();\n  \n  // Initialize fabric object defaults\n  fabric.Object.prototype.set({\n    transparentCorners: false,\n    cornerColor: AppConstants.COLORS.CORNER_COLOR,\n    borderColor: AppConstants.COLORS.BORDER_COLOR,\n    cornerSize: parseInt(canvas.width) * AppConstants.CANVAS.CORNER_SIZE_MULTIPLIER,\n    cornerStrokeColor: AppConstants.COLORS.CORNER_STROKE,\n    borderScaleFactor: AppConstants.CANVAS.BORDER_SCALE_FACTOR,\n    padding: AppConstants.CANVAS.PADDING,\n  });\n\n  // Initialize all event handlers\n  EventHandlerUtils.initializeAllHandlers();\n\n  // Update edit methods values to the selected canvas text\n  canvas.on({\n    \"selection:created\": updateInputs,\n    \"selection:updated\": updateInputs,\n    \"selection:cleared\": enableTextMethods,\n  });\n\n  // Expose canvas and other functions to global scope for testing\n  window.canvas = canvas;\n  window.processMeme = processMeme;\n  window.contentImage = contentImage;\n  window.contentRect = contentRect;\n  window.logo = logo;\n  window.logoName = logoName;\n}\n\nfunction processMeme(memeInfo) {\n  // Add meme template as canvas background\n  fabric.Image.fromURL(\n    `${memeInfo.url}`,\n    function (meme) {\n      if (contentImage != null) {\n        canvas.remove(contentImage);\n      }\n      contentImage = meme;\n      // Update global reference for testing\n      window.contentImage = contentImage;\n      positionBackgroundImage();\n    },\n    {\n      crossOrigin: \"anonymous\",\n    }\n  );\n}\n\nfunction positionBackgroundImage() {\n  CanvasUtils.positionBackgroundImage();\n}\n\nfunction generateLogoSelection(data) {\n  const $logoSelect = jQuery(\"#logo-selection\");\n\n  jQuery.each(data, function (index, names) {\n    var items = [];\n    jQuery.each(names.sort(), function (index, name) {\n      items.push(\n        '<option value=\"' +\n          name.toUpperCase() +\n          '\">' +\n          name.replace(\"%\", \" \").toUpperCase() +\n          \"</option>\"\n      );\n    });\n    $logoSelect.append(\n      '<optgroup label=\"' + index + '\">' + items.join(\"\") + \"</optgroup>\"\n    );\n  });\n\n  // Refresh the searchable select component\n  const searchableSelect = $logoSelect.data(\"searchable-select\");\n  if (searchableSelect) {\n    searchableSelect.refresh();\n  }\n}\n\nfunction loadLogoSelection() {\n  // Check for embedded logo data first (production mode)\n  if (typeof window.EMBEDDED_LOGO_DATA !== \"undefined\") {\n    console.log(\"Using embedded logo data for faster loading\");\n    generateLogoSelection(window.EMBEDDED_LOGO_DATA);\n    return;\n  }\n\n  // Fallback to AJAX loading (development mode)\n  console.log(\"Loading logo data via AJAX request\");\n  const defaultIndex =\n    generatorApplicationURL + \"resources/images/logos/index.json\";\n\n  if (typeof logoDataOverride !== \"undefined\") {\n    if (ValidationUtils.isValidJSON(logoDataOverride)) {\n      generateLogoSelection(jQuery.parseJSON(logoDataOverride));\n      return;\n    }\n  }\n\n  let logoIndex;\n  if (typeof logoIndexOverride !== \"undefined\") {\n    logoIndex = logoIndexOverride;\n  } else {\n    logoIndex = defaultIndex;\n  }\n\n  jQuery\n    .getJSON(logoIndex, function (data) {\n      generateLogoSelection(data);\n    })\n    .fail(function (jqxhr, textStatus, error) {\n      console.error(\"Failed to load logo data:\", textStatus, error);\n      showAlert(\n        \"Fehler beim Laden der Logo-Daten. Bitte Seite neu laden.\",\n        \"warning\"\n      );\n    });\n}\n\nloadLogoSelection();\n\nfunction autoPlayYouTubeModal() {\n  var trigger = jQuery(\"body\").find('[data-toggle=\"modal\"]');\n  trigger.click(function () {\n    var theModal = jQuery(this).data(\"target\"),\n      videoSRC = jQuery(this).attr(\"data-theVideo\"),\n      videoSRCauto = videoSRC + \"?autoplay=1\";\n    jQuery(theModal + \" iframe\").attr(\"src\", videoSRCauto);\n    jQuery(theModal + \" button.close\").click(function () {\n      jQuery(theModal + \" iframe\").attr(\"src\", videoSRC);\n    });\n  });\n}\njQuery(document).ready(function () {\n  autoPlayYouTubeModal();\n});\n\n\n// === resources/js/wizard.js ===\n// Wizard Navigation and UI Enhancement\nlet currentStep = 1;\nconst totalSteps = 4;\n\n// Initialize wizard functionality\nfunction initializeWizard() {\n    // Ensure we always start from step 1\n    currentStep = 1;\n    \n    // Preload fonts to ensure they're available when needed\n    preloadFonts();\n    \n    setupStepNavigation();\n    setupAdvancedOptions();\n    setupQRSection();\n    updateCanvasDimensions();\n    goToStep(1);\n}\n\n// Preload custom fonts\nfunction preloadFonts() {\n    const fonts = [\n        new FontFaceObserver('Gotham Narrow Ultra Italic'),\n        new FontFaceObserver('Gotham Narrow Ultra'),\n        new FontFaceObserver('Gotham Narrow Book'),\n        new FontFaceObserver('Gotham Narrow Bold')\n    ];\n\n    fonts.forEach(font => {\n        font.load().then(function() {\n            console.log('Font loaded successfully:', font.family);\n        }).catch(function() {\n            console.log('Font failed to load:', font.family);\n        });\n    });\n}\n\n// Step Navigation\nfunction setupStepNavigation() {\n    // Step indicator click navigation (desktop)\n    jQuery('#step-1-indicator').on('click', function() {\n        goToStep(1);\n    });\n    \n    jQuery('#step-2-indicator').on('click', function() {\n        goToStep(2);\n    });\n    \n    jQuery('#step-3-indicator').on('click', function() {\n        goToStep(3);\n    });\n    \n    jQuery('#step-4-indicator').on('click', function() {\n        goToStep(4);\n    });\n    \n    // Step indicator click navigation (mobile)\n    jQuery('#step-1-indicator-mobile').on('click', function() {\n        goToStep(1);\n    });\n    \n    jQuery('#step-2-indicator-mobile').on('click', function() {\n        goToStep(2);\n    });\n    \n    jQuery('#step-3-indicator-mobile').on('click', function() {\n        goToStep(3);\n    });\n    \n    jQuery('#step-4-indicator-mobile').on('click', function() {\n        goToStep(4);\n    });\n\n    // Next buttons\n    jQuery('#step-1-next').on('click', function() {\n        if (validateStep1()) {\n            goToStep(2);\n        }\n    });\n    \n    jQuery('#step-2-next').on('click', function() {\n        goToStep(3);\n    });\n    \n    jQuery('#step-3-next').on('click', function() {\n        goToStep(4);\n    });\n    \n    // Back buttons\n    jQuery('#step-2-back').on('click', function() {\n        goToStep(1);\n    });\n    \n    jQuery('#step-3-back').on('click', function() {\n        goToStep(2);\n    });\n    \n    jQuery('#step-4-back').on('click', function() {\n        goToStep(3);\n    });\n    \n    // Start over button\n    jQuery('#start-over').on('click', function() {\n        if (confirm('M\u00F6chten Sie wirklich von vorne beginnen? Alle \u00C4nderungen gehen verloren.')) {\n            resetWizard();\n        }\n    });\n}\n\nfunction validateStep1() {\n    const validation = ValidationUtils.validateStep1();\n    \n    if (!validation.isValid) {\n        validation.errors.forEach(error => {\n            showAlert(error, 'warning');\n        });\n        return false;\n    }\n    \n    return true;\n}\n\nfunction goToStep(stepNumber) {\n    if (stepNumber < 1 || stepNumber > totalSteps) return;\n    \n    // Hide current step\n    jQuery(`.step-content`).addClass('hidden');\n    \n    // Show target step\n    jQuery(`#step-${stepNumber}`).removeClass('hidden');\n    \n    // Update step indicators\n    updateStepIndicators(stepNumber);\n    \n    // Update current step\n    currentStep = stepNumber;\n    \n    // Auto-scroll removed completely\n}\n\nfunction updateStepIndicators(activeStep) {\n    // Update desktop indicators\n    for (let i = 1; i <= totalSteps; i++) {\n        const indicator = jQuery(`#step-${i}-indicator`);\n        const mobileIndicator = jQuery(`#step-${i}-indicator-mobile`);\n        const stepContainer = indicator.closest('.flex.flex-col');\n        const mobileContainer = mobileIndicator.closest('.flex.items-center');\n        \n        if (i <= activeStep) {\n            // Desktop indicators\n            indicator.removeClass('bg-gray-300 text-gray-600')\n                    .addClass('bg-green-600 text-white active');\n            stepContainer.find('p').first().removeClass('text-gray-500').addClass('text-gray-900');\n            stepContainer.find('p').last().removeClass('text-gray-500').addClass('text-gray-600');\n            \n            // Mobile indicators\n            mobileIndicator.removeClass('bg-gray-300 text-gray-600')\n                           .addClass('bg-green-600 text-white active');\n            mobileContainer.removeClass('bg-gray-50 border-gray-200').addClass('bg-green-50 border-green-200');\n            mobileContainer.find('p').first().removeClass('text-gray-500').addClass('text-gray-900');\n            mobileContainer.find('p').last().removeClass('text-gray-500').addClass('text-gray-600');\n        } else {\n            // Desktop indicators\n            indicator.removeClass('bg-green-600 text-white active')\n                    .addClass('bg-gray-300 text-gray-600');\n            stepContainer.find('p').first().removeClass('text-gray-900').addClass('text-gray-500');\n            stepContainer.find('p').last().removeClass('text-gray-600').addClass('text-gray-500');\n            \n            // Mobile indicators\n            mobileIndicator.removeClass('bg-green-600 text-white active')\n                           .addClass('bg-gray-300 text-gray-600');\n            mobileContainer.removeClass('bg-green-50 border-green-200').addClass('bg-gray-50 border-gray-200');\n            mobileContainer.find('p').first().removeClass('text-gray-900').addClass('text-gray-500');\n            mobileContainer.find('p').last().removeClass('text-gray-600').addClass('text-gray-500');\n        }\n    }\n    \n    // Update progress bars\n    for (let i = 1; i < totalSteps; i++) {\n        const progressBar = jQuery(`#progress-${i}-${i+1}`);\n        if (i < activeStep) {\n            progressBar.css('width', '100%');\n        } else {\n            progressBar.css('width', '0%');\n        }\n    }\n}\n\nfunction resetWizard() {\n    // Reset to step 1\n    goToStep(1);\n    \n    // Clear all form inputs\n    jQuery('#text').val('');\n    jQuery('#qr-text').val('');\n    \n    // Reset canvas\n    if (canvas) {\n        canvas.clear();\n        replaceCanvas();\n    }\n    \n    // Hide QR section\n    jQuery('#qr-section').addClass('hidden');\n    \n    showAlert('Neues Bild wird erstellt...', 'success');\n}\n\n// Advanced Options Toggle\nfunction setupAdvancedOptions() {\n    jQuery('#toggle-advanced').on('click', function() {\n        const advancedOptions = jQuery('#advanced-options');\n        const isExpanded = !advancedOptions.hasClass('hidden');\n        \n        if (isExpanded) {\n            advancedOptions.addClass('hidden');\n            jQuery(this).attr('aria-expanded', 'false');\n        } else {\n            advancedOptions.removeClass('hidden');\n            jQuery(this).attr('aria-expanded', 'true');\n        }\n    });\n    \n    // Handle format change for quality section\n    jQuery('#image-format').on('change', function() {\n        const qualitySection = jQuery('#quality-section');\n        if (jQuery(this).val() === 'jpeg') {\n            qualitySection.show();\n        } else {\n            qualitySection.hide();\n        }\n    });\n}\n\n// QR Code Section Toggle\nfunction setupQRSection() {\n    jQuery('#show-qr-section').on('click', function() {\n        const qrSection = jQuery('#qr-section');\n        qrSection.toggleClass('hidden');\n        \n        if (!qrSection.hasClass('hidden')) {\n            jQuery('#qr-text').focus();\n        }\n        \n        // Debug log\n        console.log('QR section toggled, hidden class:', qrSection.hasClass('hidden'));\n    });\n}\n\n// Canvas Dimensions Display\nfunction updateCanvasDimensions() {\n    if (canvas && typeof currentTemplate === 'function') {\n        const template = currentTemplate();\n        if (template) {\n            const dimensions = `${template.width} \u00D7 ${template.height} px`;\n            const dpi = template.dpi || 200;\n            const displayText = `${dimensions} \u2022 ${dpi} DPI`;\n            jQuery('#canvas-dimensions').text(displayText);\n        }\n    } else {\n        // Fallback if canvas isn't ready yet\n        setTimeout(updateCanvasDimensions, 500);\n    }\n}\n\n// Alert system now handled by centralized AlertSystem\n\n// LocalStorage functions for organization selection\nfunction saveSelectedOrganization() {\n    const selectedOrg = jQuery('#logo-selection').val();\n    if (selectedOrg) {\n        localStorage.setItem('gruener-bildgenerator-organisation', selectedOrg);\n    }\n}\n\nfunction restoreSelectedOrganization() {\n    const savedOrg = localStorage.getItem('gruener-bildgenerator-organisation');\n    if (savedOrg) {\n        const $logoSelect = jQuery('#logo-selection');\n        const searchableSelect = $logoSelect.data('searchable-select');\n        \n        // Check if options are already loaded and component is ready\n        if ($logoSelect.find('option').length > 1 && searchableSelect) {\n            if ($logoSelect.find(`option[value=\"${savedOrg}\"]`).length > 0) {\n                // Use searchable select's method to properly update both the select and UI\n                searchableSelect.selectOption(savedOrg);\n                console.log('Restored organization selection:', savedOrg);\n            }\n        } else if ($logoSelect.find('option').length > 1) {\n            // Fallback for regular select without searchable component\n            if ($logoSelect.find(`option[value=\"${savedOrg}\"]`).length > 0) {\n                $logoSelect.val(savedOrg);\n                $logoSelect.trigger('change');\n                console.log('Restored organization selection (fallback):', savedOrg);\n            }\n        } else {\n            // If options aren't loaded yet, wait for them with a minimal delay\n            setTimeout(() => restoreSelectedOrganization(), 50);\n        }\n    }\n}\n\n// Auto-advance logic\nfunction setupAutoAdvance() {\n    // Auto-advance from step 1 when template and logo are selected\n    jQuery('#canvas-template, #logo-selection').on('change', function() {\n        // Save organization selection when it changes\n        if (this.id === 'logo-selection') {\n            saveSelectedOrganization();\n        }\n\n        // Always update dimensions when template changes\n        setTimeout(() => {\n            updateCanvasDimensions();\n        }, 200);\n\n        // Show Facebook mobile format warning when Facebook Header template is selected\n        if (this.id === 'canvas-template') {\n            const templateName = jQuery('#canvas-template').val();\n\n            // Clear previous template warnings\n            if (window.AlertSystem) {\n                window.AlertSystem.closeAll();\n            }\n\n            // Show Facebook mobile warning\n            if (templateName === 'facebook_header') {\n                if (window.AlertSystem) {\n                    window.AlertSystem.show(\n                        'Hinweis: Facebook verwendet auf Mobilger\u00E4ten ein anderes Header-Format. Bitte Text m\u00F6glichst mittig platzieren f\u00FCr optimale Darstellung.',\n                        'info',\n                        {\n                            autoClose: false,\n                            scrollIntoView: false\n                        }\n                    );\n                }\n            }\n        }\n\n        if (currentStep === 1) {\n            const template = jQuery('#canvas-template').val();\n            const logo = jQuery('#logo-selection').val();\n\n            // Template selection notification removed\n        }\n    });\n    \n    // Auto-advance from step 2 when background image is selected\n    jQuery('#meme-input').on('change', function() {\n        // Background image notification removed\n    });\n}\n\n// Enhanced Canvas Integration\nfunction enhanceCanvasIntegration() {\n    // Override the original replaceCanvas function to include dimension updates\n    const originalReplaceCanvas = window.replaceCanvas;\n    window.replaceCanvas = function() {\n        originalReplaceCanvas.apply(this, arguments);\n        // Update dimensions after canvas is fully replaced\n        setTimeout(() => {\n            updateCanvasDimensions();\n        }, 100);\n    };\n    \n    // Canvas event listeners for better UX\n    if (canvas) {\n        canvas.on('object:added', function(e) {\n            // Object added - no auto-advance to maintain user control\n        });\n        \n        canvas.on('object:removed', function(e) {\n            // Element removed silently - no notification needed\n        });\n    }\n}\n\n// Mobile-specific enhancements\nfunction setupMobileEnhancements() {\n    // Better mobile navigation\n    if (window.innerWidth <= 768) {\n        // Simplified step indicators for mobile\n        jQuery('.step-indicator').addClass('mobile-compact');\n        \n        // Touch-friendly buttons\n        jQuery('.btn-primary, .btn-secondary').addClass('touch-friendly');\n    }\n}\n\n// Initialize everything when document is ready\njQuery(document).ready(function() {\n    // Initialize logo state first\n    LogoState.initialize();\n\n    // Set initial UI state based on logo enabled/disabled\n    const isLogoEnabled = LogoState.isLogoEnabled();\n    jQuery('#logo-toggle').prop('checked', isLogoEnabled);\n\n    if (!isLogoEnabled) {\n        // If logo is disabled, disable the logo selection dropdown\n        jQuery('#logo-selection').prop('disabled', true).addClass('opacity-50');\n    }\n\n    initializeWizard();\n    setupAutoAdvance();\n    enhanceCanvasIntegration();\n    setupMobileEnhancements();\n\n    // Restore saved organization selection (now immediate with embedded logos)\n    setTimeout(() => {\n        restoreSelectedOrganization();\n    }, 100);\n\n    // Initial state - no welcome message on first load\n\n    // Update dimensions after a short delay to ensure canvas is ready\n    setTimeout(() => {\n        updateCanvasDimensions();\n    }, 1000);\n});\n\n// Window resize handler for responsive updates\njQuery(window).on('resize', function() {\n    updateCanvasDimensions();\n    setupMobileEnhancements();\n});\n\n// Expose functions to global scope for inline event handlers\nwindow.goToStep = goToStep;\n\n// === resources/js/qrcode/qrcode-helpers.js ===\n// QR Code Helper Functions and Utilities\n\n// QR Code Data Validation Helpers\nconst QRValidationHelpers = {\n    // Validate text input\n    validateText: function(text) {\n        if (!text || typeof text !== 'string') {\n            return { valid: false, error: 'Text ist erforderlich' };\n        }\n        \n        const trimmed = text.trim();\n        if (trimmed.length === 0) {\n            return { valid: false, error: 'Text darf nicht leer sein' };\n        }\n        \n        if (trimmed.length > 2000) {\n            return { valid: false, error: 'Text ist zu lang (maximal 2000 Zeichen)' };\n        }\n        \n        return { valid: true, data: trimmed };\n    },\n    \n    // Validate and normalize URL\n    validateURL: function(url) {\n        if (!url || typeof url !== 'string') {\n            return { valid: false, error: 'URL ist erforderlich' };\n        }\n        \n        let trimmed = url.trim();\n        if (trimmed.length === 0) {\n            return { valid: false, error: 'URL darf nicht leer sein' };\n        }\n        \n        // Try to add protocol if missing\n        if (!trimmed.match(/^https?:\\/\\//i)) {\n            trimmed = 'https://' + trimmed;\n        }\n        \n        // Validate URL format\n        try {\n            const urlObj = new URL(trimmed);\n            \n            // Basic security checks\n            if (urlObj.protocol !== 'http:' && urlObj.protocol !== 'https:') {\n                return { valid: false, error: 'Nur HTTP und HTTPS URLs sind erlaubt' };\n            }\n            \n            return { valid: true, data: urlObj.toString() };\n        } catch (error) {\n            return { valid: false, error: 'Ung\u00FCltige URL' };\n        }\n    },\n    \n    // Validate email address\n    validateEmail: function(email) {\n        if (!email || typeof email !== 'string') {\n            return { valid: false, error: 'E-Mail-Adresse ist erforderlich' };\n        }\n        \n        const trimmed = email.trim();\n        if (trimmed.length === 0) {\n            return { valid: false, error: 'E-Mail-Adresse darf nicht leer sein' };\n        }\n        \n        // Basic email regex\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if (!emailRegex.test(trimmed)) {\n            return { valid: false, error: 'Ung\u00FCltige E-Mail-Adresse' };\n        }\n        \n        return { valid: true, data: trimmed };\n    },\n    \n    // Validate vCard data\n    validateVCard: function(data) {\n        if (!data || typeof data !== 'object') {\n            return { valid: false, error: 'Ung\u00FCltige Visitenkarten-Daten' };\n        }\n        \n        // At least last name is required\n        if (!data.lastname || data.lastname.trim().length === 0) {\n            return { valid: false, error: 'Nachname ist erforderlich' };\n        }\n        \n        // Validate email if provided\n        if (data.email && data.email.trim().length > 0) {\n            const emailValidation = this.validateEmail(data.email);\n            if (!emailValidation.valid) {\n                return { valid: false, error: 'Ung\u00FCltige E-Mail-Adresse: ' + emailValidation.error };\n            }\n        }\n        \n        // Validate website if provided\n        if (data.website && data.website.trim().length > 0) {\n            const urlValidation = this.validateURL(data.website);\n            if (!urlValidation.valid) {\n                return { valid: false, error: 'Ung\u00FCltige Website-URL: ' + urlValidation.error };\n            }\n        }\n        \n        return { valid: true, data: data };\n    }\n};\n\n// QR Code Format Helpers\nconst QRFormatHelpers = {\n    // Format text for QR code\n    formatText: function(text) {\n        return text.trim();\n    },\n    \n    // Format URL for QR code\n    formatURL: function(url) {\n        let formatted = url.trim();\n        \n        // Add https:// if no protocol specified\n        if (!formatted.match(/^https?:\\/\\//i)) {\n            formatted = 'https://' + formatted;\n        }\n        \n        return formatted;\n    },\n    \n    // Format email data into mailto URL\n    formatEmail: function(email, subject = '', body = '') {\n        let mailto = `mailto:${email.trim()}`;\n        const params = [];\n        \n        if (subject && subject.trim().length > 0) {\n            params.push(`subject=${encodeURIComponent(subject.trim())}`);\n        }\n        \n        if (body && body.trim().length > 0) {\n            params.push(`body=${encodeURIComponent(body.trim())}`);\n        }\n        \n        if (params.length > 0) {\n            mailto += '?' + params.join('&');\n        }\n        \n        return mailto;\n    },\n    \n    // Format vCard data\n    formatVCard: function(data) {\n        let vcard = 'BEGIN:VCARD\\n';\n        vcard += 'VERSION:3.0\\n';\n        \n        // Name components\n        const title = (data.title || '').trim();\n        const firstname = (data.firstname || '').trim();\n        const lastname = (data.lastname || '').trim();\n        \n        // Full name\n        const fullName = [title, firstname, lastname].filter(n => n.length > 0).join(' ');\n        vcard += `FN:${fullName}\\n`;\n        \n        // Structured name (Last;First;Middle;Prefix;Suffix)\n        vcard += `N:${lastname};${firstname};;${title};\\n`;\n        \n        // Contact information\n        if (data.phone && data.phone.trim().length > 0) {\n            vcard += `TEL:${data.phone.trim()}\\n`;\n        }\n        \n        if (data.email && data.email.trim().length > 0) {\n            vcard += `EMAIL:${data.email.trim()}\\n`;\n        }\n        \n        // Address\n        if (data.address || data.city || data.zip) {\n            const address = (data.address || '').trim();\n            const city = (data.city || '').trim();\n            const zip = (data.zip || '').trim();\n            \n            vcard += `ADR:;;${address};${city};;${zip};\\n`;\n        }\n        \n        // Website\n        if (data.website && data.website.trim().length > 0) {\n            let website = data.website.trim();\n            if (!website.match(/^https?:\\/\\//i)) {\n                website = 'https://' + website;\n            }\n            vcard += `URL:${website}\\n`;\n        }\n        \n        vcard += 'END:VCARD';\n        \n        return vcard;\n    }\n};\n\n// QR Code Display Helpers\nconst QRDisplayHelpers = {\n    // Get display name for QR type\n    getTypeDisplayName: function(type) {\n        const names = {\n            'text': 'Text',\n            'url': 'Homepage',\n            'email': 'E-Mail',\n            'vcard': 'Visitenkarte'\n        };\n        return names[type] || type;\n    },\n    \n    // Get icon class for QR type\n    getTypeIcon: function(type) {\n        const icons = {\n            'text': 'fas fa-font',\n            'url': 'fas fa-globe',\n            'email': 'fas fa-envelope',\n            'vcard': 'fas fa-user'\n        };\n        return icons[type] || 'fas fa-qrcode';\n    },\n    \n    // Format color name for display\n    getColorDisplayName: function(colorValue) {\n        const colorNames = {\n            '#000000': 'Schwarz',\n            '#FFFFFF': 'Wei\u00DF',\n            '#538430': 'Dunkelgr\u00FCn',\n            '#82B624': 'Hellgr\u00FCn',\n            '#FFED00': 'Gelb',\n            '#E6007E': 'Magenta'\n        };\n        return colorNames[colorValue] || colorValue;\n    },\n    \n    // Format background name for display\n    getBackgroundDisplayName: function(bgValue) {\n        const bgNames = {\n            '#FFFFFF': 'Wei\u00DF',\n            '#000000': 'Schwarz',\n            'transparent': 'Transparent'\n        };\n        return bgNames[bgValue] || bgValue;\n    },\n    \n    // Generate preview text for QR content\n    generatePreviewText: function(type, data, maxLength = 50) {\n        if (!data) return 'Keine Daten';\n        \n        let preview = '';\n        \n        switch (type) {\n            case 'text':\n                preview = data;\n                break;\n                \n            case 'url':\n                preview = data;\n                break;\n                \n            case 'email':\n                if (data.startsWith('mailto:')) {\n                    const url = new URL(data);\n                    preview = url.pathname; // The email address\n                } else {\n                    preview = data;\n                }\n                break;\n                \n            case 'vcard':\n                // Extract name from vCard\n                const nameMatch = data.match(/FN:(.+)/);\n                if (nameMatch) {\n                    preview = nameMatch[1];\n                } else {\n                    preview = 'Visitenkarte';\n                }\n                break;\n                \n            default:\n                preview = data;\n        }\n        \n        // Truncate if too long\n        if (preview.length > maxLength) {\n            preview = preview.substring(0, maxLength - 3) + '...';\n        }\n        \n        return preview;\n    }\n};\n\n// QR Code Storage Helpers\nconst QRStorageHelpers = {\n    // Save QR settings to localStorage\n    saveSettings: function(settings) {\n        try {\n            localStorage.setItem('qr-generator-settings', JSON.stringify(settings));\n        } catch (error) {\n            console.warn('Could not save QR settings to localStorage:', error);\n        }\n    },\n    \n    // Load QR settings from localStorage\n    loadSettings: function() {\n        try {\n            const saved = localStorage.getItem('qr-generator-settings');\n            return saved ? JSON.parse(saved) : null;\n        } catch (error) {\n            console.warn('Could not load QR settings from localStorage:', error);\n            return null;\n        }\n    },\n    \n    // Save recent QR data for quick access\n    saveRecentQR: function(qrData) {\n        try {\n            let recent = this.getRecentQRs();\n            \n            // Add new item to beginning\n            recent.unshift({\n                ...qrData,\n                timestamp: Date.now()\n            });\n            \n            // Keep only last 10 items\n            recent = recent.slice(0, 10);\n            \n            localStorage.setItem('qr-generator-recent', JSON.stringify(recent));\n        } catch (error) {\n            console.warn('Could not save recent QR:', error);\n        }\n    },\n    \n    // Get recent QR codes\n    getRecentQRs: function() {\n        try {\n            const saved = localStorage.getItem('qr-generator-recent');\n            return saved ? JSON.parse(saved) : [];\n        } catch (error) {\n            console.warn('Could not load recent QRs:', error);\n            return [];\n        }\n    },\n    \n    // Clear recent QR codes\n    clearRecentQRs: function() {\n        try {\n            localStorage.removeItem('qr-generator-recent');\n        } catch (error) {\n            console.warn('Could not clear recent QRs:', error);\n        }\n    }\n};\n\n// QR Code Analytics Helpers\nconst QRAnalyticsHelpers = {\n    // Track QR code generation\n    trackGeneration: function(type, success = true) {\n        try {\n            const stats = this.getStats();\n            \n            if (!stats[type]) {\n                stats[type] = { total: 0, successful: 0, failed: 0 };\n            }\n            \n            stats[type].total++;\n            if (success) {\n                stats[type].successful++;\n            } else {\n                stats[type].failed++;\n            }\n            \n            stats.lastUsed = Date.now();\n            \n            localStorage.setItem('qr-generator-stats', JSON.stringify(stats));\n        } catch (error) {\n            console.warn('Could not track QR generation:', error);\n        }\n    },\n    \n    // Get usage statistics\n    getStats: function() {\n        try {\n            const saved = localStorage.getItem('qr-generator-stats');\n            return saved ? JSON.parse(saved) : {};\n        } catch (error) {\n            console.warn('Could not load QR stats:', error);\n            return {};\n        }\n    },\n    \n    // Get most used QR type\n    getMostUsedType: function() {\n        const stats = this.getStats();\n        let maxType = null;\n        let maxCount = 0;\n        \n        Object.keys(stats).forEach(type => {\n            if (type !== 'lastUsed' && stats[type].total > maxCount) {\n                maxCount = stats[type].total;\n                maxType = type;\n            }\n        });\n        \n        return maxType;\n    }\n};\n\n// QR Code Error Helpers\nconst QRErrorHelpers = {\n    // Format error message for user display\n    formatErrorMessage: function(error, context = '') {\n        if (!error) return 'Unbekannter Fehler';\n        \n        let message = '';\n        \n        if (typeof error === 'string') {\n            message = error;\n        } else if (error.message) {\n            message = error.message;\n        } else {\n            message = 'Ein unerwarteter Fehler ist aufgetreten';\n        }\n        \n        // Add context if provided\n        if (context) {\n            message = `${context}: ${message}`;\n        }\n        \n        return message;\n    },\n    \n    // Check if error is recoverable\n    isRecoverableError: function(error) {\n        if (!error) return false;\n        \n        const message = error.message || error.toString();\n        \n        // Network or temporary errors are usually recoverable\n        const recoverablePatterns = [\n            /network/i,\n            /timeout/i,\n            /temporary/i,\n            /try again/i,\n            /rate limit/i\n        ];\n        \n        return recoverablePatterns.some(pattern => pattern.test(message));\n    },\n    \n    // Get suggested action for error\n    getSuggestedAction: function(error) {\n        if (!error) return 'Seite neu laden und erneut versuchen';\n        \n        const message = error.message || error.toString();\n        \n        if (message.includes('size') || message.includes('too large')) {\n            return 'Versuchen Sie k\u00FCrzeren Text oder weniger Daten';\n        }\n        \n        if (message.includes('invalid') || message.includes('ung\u00FCltig')) {\n            return '\u00DCberpr\u00FCfen Sie Ihre Eingaben auf Richtigkeit';\n        }\n        \n        if (message.includes('network') || message.includes('fetch')) {\n            return '\u00DCberpr\u00FCfen Sie Ihre Internetverbindung';\n        }\n        \n        if (this.isRecoverableError(error)) {\n            return 'Einen Moment warten und erneut versuchen';\n        }\n        \n        return 'Seite neu laden und erneut versuchen';\n    }\n};\n\n// Export helpers for global access\nwindow.QRValidationHelpers = QRValidationHelpers;\nwindow.QRFormatHelpers = QRFormatHelpers;\nwindow.QRDisplayHelpers = QRDisplayHelpers;\nwindow.QRStorageHelpers = QRStorageHelpers;\nwindow.QRAnalyticsHelpers = QRAnalyticsHelpers;\nwindow.QRErrorHelpers = QRErrorHelpers;\n\n// Utility function to safely call helper methods\nfunction safeHelperCall(helperObject, methodName, ...args) {\n    try {\n        if (helperObject && typeof helperObject[methodName] === 'function') {\n            return helperObject[methodName](...args);\n        } else {\n            console.warn(`Helper method ${methodName} not found`);\n            return null;\n        }\n    } catch (error) {\n        console.error(`Error calling helper method ${methodName}:`, error);\n        return null;\n    }\n}\n\n// Initialize helpers when document is ready\njQuery(document).ready(function() {\n    console.log('QR Code Helpers loaded');\n    \n    // Auto-restore settings if available\n    const savedSettings = QRStorageHelpers.loadSettings();\n    if (savedSettings) {\n        console.log('Loaded saved QR settings:', savedSettings);\n    }\n});\n\n// === resources/js/qrcode/qrcode-generator.js ===\n// QR Code Generation Logic\nlet qrCodeInstance = null;\nlet qrPreviewCanvas = null;\n\n// QR Code Colors (from plan)\nconst QR_COLORS = {\n    '#000000': 'Schwarz',\n    '#FFFFFF': 'Wei\u00DF',\n    '#538430': 'Dunkelgr\u00FCn',\n    '#82B624': 'Hellgr\u00FCn',\n    '#FFED00': 'Gelb',\n    '#E6007E': 'Magenta'\n};\n\nconst QR_BACKGROUNDS = {\n    '#FFFFFF': 'Wei\u00DF',\n    '#000000': 'Schwarz',\n    'transparent': 'Transparent'\n};\n\n// Generate QR Code Preview\nfunction generateQRPreview(isLiveUpdate = false) {\n    if (!qrSelectedType) {\n        if (!isLiveUpdate) {\n            showQRAlert('Kein Inhaltstyp ausgew\u00E4hlt', 'error');\n        }\n        return;\n    }\n    \n    try {\n        const qrData = collectQRData();\n        \n        if (!qrData) {\n            if (!isLiveUpdate) {\n                clearQRPreview();\n                updateQRStatus('Geben Sie Daten ein f\u00FCr die Vorschau');\n            }\n            return;\n        }\n        \n        // Update status\n        updateQRStatus('QR-Code wird generiert...');\n        \n        // Generate QR code\n        const qrColor = jQuery('#qr-color-select').val() || '#000000';\n        const qrBackground = jQuery('#qr-background-select').val() || '#FFFFFF';\n        \n        generateQRCode(qrData, qrColor, qrBackground)\n            .then((qrCanvas) => {\n                if (qrCanvas) {\n                    displayQRPreview(qrCanvas);\n                    qrGeneratedCode = {\n                        data: qrData,\n                        color: qrColor,\n                        background: qrBackground,\n                        canvas: qrCanvas\n                    };\n                    \n                    if (!isLiveUpdate) {\n                        updateQRStatus('QR-Code erfolgreich erstellt');\n                    } else {\n                        updateQRStatus('Vorschau aktualisiert');\n                    }\n                }\n            })\n            .catch((error) => {\n                console.error('QR Code generation error:', error);\n                if (!isLiveUpdate) {\n                    showQRAlert('Fehler beim Erstellen des QR-Codes: ' + error.message, 'error');\n                }\n                updateQRStatus('Fehler bei der Generierung');\n            });\n            \n    } catch (error) {\n        console.error('QR Preview error:', error);\n        if (!isLiveUpdate) {\n            showQRAlert('Fehler bei der Vorschau: ' + error.message, 'error');\n        }\n        updateQRStatus('Vorschau-Fehler');\n    }\n}\n\n// Collect QR Data from form inputs\nfunction collectQRData() {\n    if (!qrSelectedType) return null;\n    \n    try {\n        switch (qrSelectedType) {\n            case 'text':\n                const text = jQuery('#qr-text-input').val().trim();\n                return text || null;\n                \n            case 'url':\n                let url = jQuery('#qr-url-input').val().trim();\n                if (!url) return null;\n                \n                // Add https:// if missing\n                if (!url.match(/^https?:\\/\\//)) {\n                    url = 'https://' + url;\n                }\n                return url;\n                \n            case 'email':\n                const email = jQuery('#qr-email-address').val().trim();\n                if (!email) return null;\n                \n                const subject = jQuery('#qr-email-subject').val().trim();\n                const body = jQuery('#qr-email-body').val().trim();\n                \n                let mailto = `mailto:${email}`;\n                const params = [];\n                \n                if (subject) params.push(`subject=${encodeURIComponent(subject)}`);\n                if (body) params.push(`body=${encodeURIComponent(body)}`);\n                \n                if (params.length > 0) {\n                    mailto += '?' + params.join('&');\n                }\n                \n                return mailto;\n                \n            case 'vcard':\n                const lastname = jQuery('#qr-vcard-lastname').val().trim();\n                if (!lastname) return null;\n                \n                const vcard = generateVCard();\n                return vcard;\n                \n            default:\n                return null;\n        }\n    } catch (error) {\n        console.error('Error collecting QR data:', error);\n        return null;\n    }\n}\n\n// Generate vCard string\nfunction generateVCard() {\n    const fields = {\n        title: jQuery('#qr-vcard-title').val().trim(),\n        firstname: jQuery('#qr-vcard-firstname').val().trim(),\n        lastname: jQuery('#qr-vcard-lastname').val().trim(),\n        phone: jQuery('#qr-vcard-phone').val().trim(),\n        email: jQuery('#qr-vcard-email').val().trim(),\n        address: jQuery('#qr-vcard-address').val().trim(),\n        zip: jQuery('#qr-vcard-zip').val().trim(),\n        city: jQuery('#qr-vcard-city').val().trim(),\n        website: jQuery('#qr-vcard-website').val().trim()\n    };\n    \n    let vcard = 'BEGIN:VCARD\\n';\n    vcard += 'VERSION:3.0\\n';\n    \n    // Name (required)\n    const fullName = `${fields.title} ${fields.firstname} ${fields.lastname}`.trim();\n    vcard += `FN:${fullName}\\n`;\n    vcard += `N:${fields.lastname};${fields.firstname};;${fields.title};\\n`;\n    \n    // Optional fields\n    if (fields.phone) vcard += `TEL:${fields.phone}\\n`;\n    if (fields.email) vcard += `EMAIL:${fields.email}\\n`;\n    \n    if (fields.address || fields.zip || fields.city) {\n        vcard += `ADR:;;${fields.address};${fields.city};;${fields.zip};\\n`;\n    }\n    \n    if (fields.website) {\n        let website = fields.website;\n        if (!website.match(/^https?:\\/\\//)) {\n            website = 'https://' + website;\n        }\n        vcard += `URL:${website}\\n`;\n    }\n    \n    vcard += 'END:VCARD';\n    \n    return vcard;\n}\n\n// Generate QR Code using qrcode.js library\nfunction generateQRCode(data, foregroundColor, backgroundColor) {\n    return new Promise((resolve, reject) => {\n        try {\n            // Create temporary container for QR generation\n            const tempDiv = document.createElement('div');\n            tempDiv.style.display = 'none';\n            document.body.appendChild(tempDiv);\n\n            // Determine QR code size\n            const qrSize = 512; // High resolution for quality\n\n            // Check if foreground is white or near-white\n            const isWhiteForeground = isColorWhiteOrNearWhite(foregroundColor);\n\n            // Use a placeholder color for background when:\n            // 1. We want transparency AND\n            // 2. The foreground is white/near-white\n            // This prevents white foreground pixels from being made transparent\n            const PLACEHOLDER_COLOR = '#FF00FF'; // Magenta as placeholder\n            const useBackgroundPlaceholder = backgroundColor === 'transparent' && isWhiteForeground;\n            const actualColorLight = backgroundColor === 'transparent'\n                ? (useBackgroundPlaceholder ? PLACEHOLDER_COLOR : '#FFFFFF')\n                : backgroundColor;\n\n            // QR code options\n            const options = {\n                text: data,\n                width: qrSize,\n                height: qrSize,\n                colorDark: foregroundColor,\n                colorLight: actualColorLight,\n                correctLevel: QRCode.CorrectLevel.M, // Medium error correction\n                quietZone: backgroundColor !== 'transparent' ? Math.floor(qrSize * 0.05) : 0,\n                quietZoneColor: backgroundColor === 'transparent' ? 'transparent' : backgroundColor\n            };\n\n            // Check for contrast issues\n            if (foregroundColor === backgroundColor && backgroundColor !== 'transparent') {\n                reject(new Error('Vordergrund- und Hintergrundfarbe m\u00FCssen unterschiedlich sein.'));\n                return;\n            }\n\n            // Generate QR code\n            const qr = new QRCode(tempDiv, options);\n\n            // Wait for generation and extract canvas\n            setTimeout(() => {\n                try {\n                    const qrImg = tempDiv.querySelector('img');\n                    if (!qrImg) {\n                        document.body.removeChild(tempDiv);\n                        reject(new Error('QR-Code Bild konnte nicht generiert werden.'));\n                        return;\n                    }\n\n                    // Create final canvas with proper quiet zone\n                    const canvas = document.createElement('canvas');\n                    const ctx = canvas.getContext('2d');\n\n                    let finalSize = qrSize;\n                    let quietZoneSize = 0;\n\n                    if (backgroundColor !== 'transparent') {\n                        quietZoneSize = Math.floor(qrSize * 0.05);\n                        finalSize = qrSize + (quietZoneSize * 2);\n                    }\n\n                    canvas.width = finalSize;\n                    canvas.height = finalSize;\n\n                    // Fill background\n                    if (backgroundColor !== 'transparent') {\n                        ctx.fillStyle = backgroundColor;\n                        ctx.fillRect(0, 0, finalSize, finalSize);\n                    }\n\n                    // Helper function to make background pixels transparent\n                    const makeBackgroundTransparent = () => {\n                        if (backgroundColor === 'transparent') {\n                            const imageData = ctx.getImageData(0, 0, finalSize, finalSize);\n                            const pixelData = imageData.data;\n\n                            for (let i = 0; i < pixelData.length; i += 4) {\n                                const r = pixelData[i];\n                                const g = pixelData[i + 1];\n                                const b = pixelData[i + 2];\n\n                                if (useBackgroundPlaceholder) {\n                                    // When using placeholder, only make magenta pixels transparent\n                                    // Magenta is RGB(255, 0, 255)\n                                    if (r > 250 && g < 5 && b > 250) {\n                                        pixelData[i + 3] = 0; // Set alpha to 0 (fully transparent)\n                                    }\n                                } else {\n                                    // Standard case: make white/near-white pixels transparent\n                                    // This is safe because foreground is NOT white\n                                    if (r > 250 && g > 250 && b > 250) {\n                                        pixelData[i + 3] = 0; // Set alpha to 0 (fully transparent)\n                                    }\n                                }\n                            }\n\n                            ctx.putImageData(imageData, 0, 0);\n                        }\n                    };\n\n                    // Draw QR code\n                    qrImg.onload = () => {\n                        ctx.drawImage(qrImg, quietZoneSize, quietZoneSize, qrSize, qrSize);\n                        makeBackgroundTransparent();\n\n                        // Clean up\n                        document.body.removeChild(tempDiv);\n\n                        resolve(canvas);\n                    };\n\n                    // If image is already loaded\n                    if (qrImg.complete) {\n                        ctx.drawImage(qrImg, quietZoneSize, quietZoneSize, qrSize, qrSize);\n                        makeBackgroundTransparent();\n                        document.body.removeChild(tempDiv);\n                        resolve(canvas);\n                    }\n\n                } catch (error) {\n                    document.body.removeChild(tempDiv);\n                    reject(error);\n                }\n            }, 200); // Wait for QR generation\n\n        } catch (error) {\n            reject(error);\n        }\n    });\n}\n\n// Helper function to check if a color is white or near-white\nfunction isColorWhiteOrNearWhite(hexColor) {\n    // Remove # if present\n    const hex = hexColor.replace('#', '');\n\n    // Parse RGB values\n    const r = parseInt(hex.substring(0, 2), 16);\n    const g = parseInt(hex.substring(2, 4), 16);\n    const b = parseInt(hex.substring(4, 6), 16);\n\n    // Check if all RGB values are above 250 (near-white threshold)\n    return r > 250 && g > 250 && b > 250;\n}\n\n// Display QR Preview\nfunction displayQRPreview(canvas) {\n    const previewContainer = jQuery('#qr-preview-display');\n    const placeholder = jQuery('#qr-preview-placeholder');\n    \n    // Clear previous preview\n    previewContainer.empty();\n    \n    // Create display canvas (scaled down for preview)\n    const displayCanvas = document.createElement('canvas');\n    const displayCtx = displayCanvas.getContext('2d');\n    \n    const maxSize = 300; // Maximum preview size\n    const scale = Math.min(maxSize / canvas.width, maxSize / canvas.height);\n    \n    displayCanvas.width = canvas.width * scale;\n    displayCanvas.height = canvas.height * scale;\n    \n    // Enable crisp pixel rendering\n    displayCtx.imageSmoothingEnabled = false;\n    displayCtx.webkitImageSmoothingEnabled = false;\n    displayCtx.mozImageSmoothingEnabled = false;\n    displayCtx.msImageSmoothingEnabled = false;\n    \n    displayCtx.drawImage(canvas, 0, 0, displayCanvas.width, displayCanvas.height);\n    \n    // Add styling\n    displayCanvas.style.maxWidth = '100%';\n    displayCanvas.style.height = 'auto';\n    displayCanvas.style.border = '1px solid #e5e7eb';\n    displayCanvas.style.borderRadius = '8px';\n    displayCanvas.style.boxShadow = '0 4px 6px -1px rgba(0, 0, 0, 0.1)';\n    \n    // Show preview\n    previewContainer.append(displayCanvas).removeClass('hidden');\n    placeholder.addClass('hidden');\n    \n    // Store reference for download\n    qrPreviewCanvas = canvas;\n}\n\n// Clear QR Preview\nfunction clearQRPreview() {\n    const previewContainer = jQuery('#qr-preview-display');\n    const placeholder = jQuery('#qr-preview-placeholder');\n    \n    previewContainer.addClass('hidden').empty();\n    placeholder.removeClass('hidden');\n    \n    qrPreviewCanvas = null;\n    qrGeneratedCode = null;\n    \n    updateQRStatus('W\u00E4hlen Sie einen Inhaltstyp');\n}\n\n// Download QR Code\nfunction downloadQRCode() {\n    if (!qrGeneratedCode || !qrPreviewCanvas) {\n        showQRAlert('Kein QR-Code zum Herunterladen verf\u00FCgbar.', 'warning');\n        return;\n    }\n    \n    try {\n        // Get current colors (in case they were changed)\n        const currentColor = jQuery('#qr-color-select').val();\n        const currentBackground = jQuery('#qr-background-select').val();\n        \n        // Regenerate with current settings if they changed\n        if (currentColor !== qrGeneratedCode.color || currentBackground !== qrGeneratedCode.background) {\n            updateQRStatus('QR-Code wird mit neuen Einstellungen generiert...');\n            \n            generateQRCode(qrGeneratedCode.data, currentColor, currentBackground)\n                .then((newCanvas) => {\n                    performDownload(newCanvas);\n                })\n                .catch((error) => {\n                    showQRAlert('Fehler beim Erstellen des finalen QR-Codes: ' + error.message, 'error');\n                });\n        } else {\n            performDownload(qrPreviewCanvas);\n        }\n        \n    } catch (error) {\n        console.error('Download error:', error);\n        showQRAlert('Fehler beim Download: ' + error.message, 'error');\n    }\n}\n\n// Perform actual download\nfunction performDownload(canvas) {\n    try {\n        // Convert to blob\n        canvas.toBlob((blob) => {\n            if (!blob) {\n                showQRAlert('Fehler beim Erstellen der Bild-Datei.', 'error');\n                return;\n            }\n            \n            // Create download link\n            const url = URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = generateQRFileName();\n            \n            // Trigger download\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            \n            // Clean up\n            URL.revokeObjectURL(url);\n            \n            updateQRStatus('QR-Code erfolgreich heruntergeladen');\n            showQRAlert('QR-Code wurde heruntergeladen!', 'success');\n            \n        }, 'image/png', 1.0);\n        \n    } catch (error) {\n        console.error('Download execution error:', error);\n        showQRAlert('Fehler beim Download-Vorgang: ' + error.message, 'error');\n    }\n}\n\n// Generate filename for QR code\nfunction generateQRFileName() {\n    const type = qrSelectedType || 'qrcode';\n    const timestamp = new Date().toISOString().split('T')[0]; // YYYY-MM-DD\n    return `qrcode-${type}-${timestamp}.png`;\n}\n\n// Setup color change handlers\nfunction setupQRColorHandlers() {\n    jQuery('#qr-color-select, #qr-background-select').on('change', function() {\n        if (qrGeneratedCode && qrCurrentStep === 3) {\n            // Regenerate preview with new colors\n            setTimeout(() => {\n                generateQRPreview();\n            }, 100);\n        }\n    });\n}\n\n// Initialize QR Generator\nfunction initializeQRGenerator() {\n    setupQRColorHandlers();\n    console.log('QR Code Generator initialized');\n}\n\n// Initialize when document is ready\njQuery(document).ready(function() {\n    // Don't auto-initialize - will be called when needed\n    console.log('QR Code Generator module loaded');\n});\n\n// === resources/js/qrcode/qrcode-wizard.js ===\n// QR Code Wizard Navigation and State Management\nlet qrCurrentStep = 1;\nconst qrTotalSteps = 3;\nlet qrSelectedType = null;\nlet qrGeneratedCode = null;\n\n// QR Code Wizard Initialization\nfunction initializeQRWizard() {\n    qrCurrentStep = 1;\n    qrSelectedType = null;\n    qrGeneratedCode = null;\n    \n    setupQRStepNavigation();\n    setupQRTypeSelection();\n    qrGoToStep(1);\n    \n    console.log('QR Code Wizard initialized');\n}\n\n// QR Code Step Navigation Setup\nfunction setupQRStepNavigation() {\n    // Next buttons\n    jQuery('#qr-step-1-next').on('click', function() {\n        if (validateQRStep1()) {\n            qrGoToStep(2);\n        }\n    });\n    \n    jQuery('#qr-step-2-next').on('click', function() {\n        if (validateQRStep2()) {\n            qrGoToStep(3);\n        }\n    });\n    \n    // Back buttons\n    jQuery('#qr-step-2-back').on('click', function() {\n        qrGoToStep(1);\n    });\n    \n    jQuery('#qr-step-3-back').on('click', function() {\n        qrGoToStep(2);\n    });\n    \n    // Start over button\n    jQuery('#qr-start-over').on('click', function() {\n        if (confirm('M\u00F6chten Sie wirklich einen neuen QR-Code erstellen? Alle Eingaben gehen verloren.')) {\n            resetQRWizard();\n        }\n    });\n}\n\n// QR Code Type Selection Setup\nfunction setupQRTypeSelection() {\n    jQuery('.qr-type-button').on('click', function() {\n        const type = jQuery(this).data('type');\n        selectQRType(type);\n    });\n}\n\n// Select QR Code Type\nfunction selectQRType(type) {\n    qrSelectedType = type;\n    \n    // Update button states\n    jQuery('.qr-type-button').removeClass('active bg-gruene-primary text-white')\n                             .addClass('bg-white text-gray-700 border-gray-300');\n    \n    jQuery(`.qr-type-button[data-type=\"${type}\"]`)\n        .removeClass('bg-white text-gray-700 border-gray-300')\n        .addClass('active bg-gruene-primary text-white');\n    \n    // Enable next button\n    jQuery('#qr-step-1-next').prop('disabled', false).removeClass('disabled:opacity-50');\n    \n    // Update status\n    updateQRStatus(`${getQRTypeDisplayName(type)} ausgew\u00E4hlt`);\n    \n    console.log('QR Type selected:', type);\n}\n\n// Get display name for QR type\nfunction getQRTypeDisplayName(type) {\n    const names = {\n        'text': 'Text',\n        'url': 'Homepage',\n        'email': 'E-Mail',\n        'vcard': 'Visitenkarte'\n    };\n    return names[type] || type;\n}\n\n// QR Code Step Navigation\nfunction qrGoToStep(stepNumber) {\n    if (stepNumber < 1 || stepNumber > qrTotalSteps) return;\n    \n    // Hide current step\n    jQuery('.qr-step-content').addClass('hidden');\n    \n    // Show target step\n    jQuery(`#qr-step-${stepNumber}`).removeClass('hidden');\n    \n    // Update step indicators\n    updateQRStepIndicators(stepNumber);\n    \n    // Update current step\n    qrCurrentStep = stepNumber;\n    \n    // Handle step-specific logic\n    if (stepNumber === 2) {\n        renderQRForm();\n    } else if (stepNumber === 3) {\n        if (typeof generateQRPreview === 'function') {\n            generateQRPreview();\n        }\n    }\n    \n    // Auto-scroll removed completely\n    \n    console.log('QR Step:', stepNumber);\n}\n\n// Update QR Step Indicators\nfunction updateQRStepIndicators(activeStep) {\n    for (let i = 1; i <= qrTotalSteps; i++) {\n        const indicator = jQuery(`#qr-step-${i}-indicator`);\n        const stepContainer = indicator.closest('.flex.flex-col');\n        \n        if (i <= activeStep) {\n            indicator.removeClass('bg-gray-300 text-gray-600')\n                    .addClass('bg-green-600 text-white active');\n            stepContainer.find('p').first().removeClass('text-gray-500').addClass('text-gray-900');\n            stepContainer.find('p').last().removeClass('text-gray-500').addClass('text-gray-600');\n        } else {\n            indicator.removeClass('bg-green-600 text-white active')\n                    .addClass('bg-gray-300 text-gray-600');\n            stepContainer.find('p').first().removeClass('text-gray-900').addClass('text-gray-500');\n            stepContainer.find('p').last().removeClass('text-gray-600').addClass('text-gray-500');\n        }\n    }\n    \n    // Update progress bars\n    for (let i = 1; i < qrTotalSteps; i++) {\n        const progressBar = jQuery(`#qr-progress-${i}-${i+1}`);\n        if (i < activeStep) {\n            progressBar.css('width', '100%');\n        } else {\n            progressBar.css('width', '0%');\n        }\n    }\n}\n\n// Render QR Form based on selected type\nfunction renderQRForm() {\n    const container = jQuery('#qr-form-container');\n    container.empty();\n    \n    if (!qrSelectedType) {\n        container.html('<p class=\"text-gray-500\">Kein Inhaltstyp ausgew\u00E4hlt</p>');\n        return;\n    }\n    \n    let formHTML = '';\n    \n    switch (qrSelectedType) {\n        case 'text':\n            formHTML = `\n                <div>\n                    <label for=\"qr-text-input\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Ihr Text:\n                    </label>\n                    <textarea\n                        id=\"qr-text-input\"\n                        class=\"form-input w-full\"\n                        rows=\"5\"\n                        placeholder=\"Geben Sie Ihren Text hier ein...\"\n                        required\n                    ></textarea>\n                </div>\n            `;\n            break;\n            \n        case 'url':\n            formHTML = `\n                <div>\n                    <label for=\"qr-url-input\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Website-URL:\n                    </label>\n                    <input\n                        type=\"url\"\n                        id=\"qr-url-input\"\n                        class=\"form-input w-full\"\n                        placeholder=\"https://www.beispiel.de\"\n                        required\n                    />\n                </div>\n            `;\n            break;\n            \n        case 'email':\n            formHTML = `\n                <div class=\"space-y-4\">\n                    <div>\n                        <label for=\"qr-email-address\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            E-Mail-Adresse:\n                        </label>\n                        <input\n                            type=\"email\"\n                            id=\"qr-email-address\"\n                            class=\"form-input w-full\"\n                            placeholder=\"beispiel@gruene.at\"\n                            required\n                        />\n                    </div>\n                    <div>\n                        <label for=\"qr-email-subject\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Betreff:\n                        </label>\n                        <input\n                            type=\"text\"\n                            id=\"qr-email-subject\"\n                            class=\"form-input w-full\"\n                            placeholder=\"Betreff der E-Mail\"\n                        />\n                    </div>\n                    <div>\n                        <label for=\"qr-email-body\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Nachricht:\n                        </label>\n                        <textarea\n                            id=\"qr-email-body\"\n                            class=\"form-input w-full\"\n                            rows=\"5\"\n                            placeholder=\"Nachrichtentext...\"\n                        ></textarea>\n                    </div>\n                </div>\n            `;\n            break;\n            \n        case 'vcard':\n            formHTML = `\n                <div class=\"space-y-4\">\n                    <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                        <div>\n                            <label for=\"qr-vcard-title\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                Titel:\n                            </label>\n                            <input\n                                type=\"text\"\n                                id=\"qr-vcard-title\"\n                                class=\"form-input w-full\"\n                                placeholder=\"Dr., Mag., etc.\"\n                            />\n                        </div>\n                        <div>\n                            <label for=\"qr-vcard-firstname\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                Vorname:\n                            </label>\n                            <input\n                                type=\"text\"\n                                id=\"qr-vcard-firstname\"\n                                class=\"form-input w-full\"\n                                placeholder=\"Max\"\n                            />\n                        </div>\n                    </div>\n                    <div>\n                        <label for=\"qr-vcard-lastname\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Nachname: *\n                        </label>\n                        <input\n                            type=\"text\"\n                            id=\"qr-vcard-lastname\"\n                            class=\"form-input w-full\"\n                            placeholder=\"Mustermann\"\n                            required\n                        />\n                    </div>\n                    <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                        <div>\n                            <label for=\"qr-vcard-phone\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                Telefonnummer:\n                            </label>\n                            <input\n                                type=\"tel\"\n                                id=\"qr-vcard-phone\"\n                                class=\"form-input w-full\"\n                                placeholder=\"+43 1 234 5678\"\n                            />\n                        </div>\n                        <div>\n                            <label for=\"qr-vcard-email\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                E-Mail:\n                            </label>\n                            <input\n                                type=\"email\"\n                                id=\"qr-vcard-email\"\n                                class=\"form-input w-full\"\n                                placeholder=\"max.mustermann@gruene.at\"\n                            />\n                        </div>\n                    </div>\n                    <div>\n                        <label for=\"qr-vcard-address\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Stra\u00DFe und Hausnummer:\n                        </label>\n                        <input\n                            type=\"text\"\n                            id=\"qr-vcard-address\"\n                            class=\"form-input w-full\"\n                            placeholder=\"Musterstra\u00DFe 123\"\n                        />\n                    </div>\n                    <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                        <div>\n                            <label for=\"qr-vcard-zip\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                PLZ:\n                            </label>\n                            <input\n                                type=\"text\"\n                                id=\"qr-vcard-zip\"\n                                class=\"form-input w-full\"\n                                placeholder=\"1010\"\n                            />\n                        </div>\n                        <div>\n                            <label for=\"qr-vcard-city\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                Stadt:\n                            </label>\n                            <input\n                                type=\"text\"\n                                id=\"qr-vcard-city\"\n                                class=\"form-input w-full\"\n                                placeholder=\"Wien\"\n                            />\n                        </div>\n                    </div>\n                    <div>\n                        <label for=\"qr-vcard-website\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Homepage:\n                        </label>\n                        <input\n                            type=\"url\"\n                            id=\"qr-vcard-website\"\n                            class=\"form-input w-full\"\n                            placeholder=\"https://www.gruene.at\"\n                        />\n                    </div>\n                    <div class=\"bg-blue-50 border border-blue-200 rounded-md p-3\">\n                        <div class=\"flex\">\n                            <div class=\"flex-shrink-0\">\n                                <i class=\"fas fa-info-circle text-blue-400\"></i>\n                            </div>\n                            <div class=\"ml-3\">\n                                <p class=\"text-sm text-blue-700\">\n                                    Alle Felder au\u00DFer dem Nachnamen sind optional. \n                                    Der QR-Code wird auch bei Teilbef\u00FCllung erstellt.\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `;\n            break;\n    }\n    \n    container.html(formHTML);\n    \n    // Focus first input\n    container.find('input, textarea').first().focus();\n    \n    // Setup live preview updates\n    setupQRLivePreview();\n}\n\n// Setup live preview updates\nfunction setupQRLivePreview() {\n    const inputs = jQuery('#qr-form-container input, #qr-form-container textarea');\n    \n    inputs.on('input', debounce(function() {\n        if (qrCurrentStep === 2) {\n            // Update status to show preview is being generated\n            updateQRStatus('Vorschau wird aktualisiert...');\n            \n            // Generate preview with a slight delay\n            setTimeout(() => {\n                if (typeof generateQRPreview === 'function') {\n                    generateQRPreview(true);\n                }\n            }, 100);\n        }\n    }, 300));\n}\n\n// Validate QR Step 1\nfunction validateQRStep1() {\n    if (!qrSelectedType) {\n        showQRAlert('Bitte w\u00E4hlen Sie einen Inhaltstyp aus.', 'warning');\n        return false;\n    }\n    return true;\n}\n\n// Validate QR Step 2\nfunction validateQRStep2() {\n    if (!qrSelectedType) {\n        showQRAlert('Kein Inhaltstyp ausgew\u00E4hlt.', 'error');\n        return false;\n    }\n    \n    // Type-specific validation\n    switch (qrSelectedType) {\n        case 'text':\n            if (!jQuery('#qr-text-input').val().trim()) {\n                showQRAlert('Bitte geben Sie einen Text ein.', 'warning');\n                jQuery('#qr-text-input').focus();\n                return false;\n            }\n            break;\n            \n        case 'url':\n            const url = jQuery('#qr-url-input').val().trim();\n            if (!url) {\n                showQRAlert('Bitte geben Sie eine URL ein.', 'warning');\n                jQuery('#qr-url-input').focus();\n                return false;\n            }\n            if (!isValidURL(url)) {\n                showQRAlert('Bitte geben Sie eine g\u00FCltige URL ein.', 'warning');\n                jQuery('#qr-url-input').focus();\n                return false;\n            }\n            break;\n            \n        case 'email':\n            if (!jQuery('#qr-email-address').val().trim()) {\n                showQRAlert('Bitte geben Sie eine E-Mail-Adresse ein.', 'warning');\n                jQuery('#qr-email-address').focus();\n                return false;\n            }\n            break;\n            \n        case 'vcard':\n            if (!jQuery('#qr-vcard-lastname').val().trim()) {\n                showQRAlert('Bitte geben Sie mindestens einen Nachnamen ein.', 'warning');\n                jQuery('#qr-vcard-lastname').focus();\n                return false;\n            }\n            break;\n    }\n    \n    return true;\n}\n\n// Reset QR Wizard\nfunction resetQRWizard() {\n    qrCurrentStep = 1;\n    qrSelectedType = null;\n    qrGeneratedCode = null;\n    \n    // Clear form inputs\n    jQuery('#qr-form-container').empty();\n    \n    // Reset type buttons\n    jQuery('.qr-type-button').removeClass('active bg-gruene-primary text-white')\n                             .addClass('bg-white text-gray-700 border-gray-300');\n    \n    // Disable next button\n    jQuery('#qr-step-1-next').prop('disabled', true).addClass('disabled:opacity-50');\n    \n    // Clear preview\n    if (typeof clearQRPreview === 'function') {\n        clearQRPreview();\n    }\n    \n    // Go to step 1\n    qrGoToStep(1);\n    \n    updateQRStatus('W\u00E4hlen Sie einen Inhaltstyp');\n    showQRAlert('Neuer QR-Code wird erstellt...', 'success');\n}\n\n// Update QR Status\nfunction updateQRStatus(message) {\n    jQuery('#qr-status').text(message);\n}\n\n// Show QR Alert - Now uses unified alert system\nfunction showQRAlert(message, type = 'info') {\n    // Use the unified alert system if available\n    if (typeof window.AlertSystem !== 'undefined' && window.AlertSystem.showQRAlert) {\n        return window.AlertSystem.showQRAlert(message, type);\n    }\n    \n    // Fallback to legacy system\n    if (typeof showAlert === 'function') {\n        showAlert(message, type);\n    } else if (typeof showTailwindAlert === 'function') {\n        showTailwindAlert(message, type);\n    } else {\n        // Final fallback to console\n        console.log(`QR Alert (${type}):`, message);\n    }\n}\n\n// Utility: Debounce function\nfunction debounce(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n        const later = () => {\n            clearTimeout(timeout);\n            func.apply(this, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\n\n// Utility: Validate URL\nfunction isValidURL(string) {\n    try {\n        new URL(string);\n        return true;\n    } catch (_) {\n        // Try adding https:// if it's missing\n        try {\n            new URL('https://' + string);\n            return true;\n        } catch (_) {\n            return false;\n        }\n    }\n}\n\n// Initialize QR Wizard when module is loaded\njQuery(document).ready(function() {\n    // Don't auto-initialize - will be called when QR tab is activated\n    console.log('QR Code Wizard module loaded');\n});\n\n// Expose functions to global scope for inline event handlers\nwindow.qrGoToStep = qrGoToStep;\n\n// === resources/js/qrcode/qrcode-handlers.js ===\n// QR Code Event Handlers\nlet qrHandlersInitialized = false;\n\n// Initialize all QR Code event handlers\nfunction initializeQRHandlers() {\n    if (qrHandlersInitialized) {\n        console.log('QR Handlers already initialized');\n        return;\n    }\n    \n    setupTabNavigationHandlers();\n    setupQRDownloadHandler();\n    \n    qrHandlersInitialized = true;\n    console.log('QR Code Handlers initialized');\n}\n\n// Setup Tab Navigation Handlers\nfunction setupTabNavigationHandlers() {\n    // Desktop tab handlers\n    jQuery('#tab-generator').on('click', function() {\n        switchToTab('generator');\n    });\n    \n    jQuery('#tab-qrcode').on('click', function() {\n        switchToTab('qrcode');\n    });\n    \n    // Mobile tab handlers\n    jQuery('#tab-generator-mobile').on('click', function() {\n        switchToTab('generator');\n    });\n    \n    jQuery('#tab-qrcode-mobile').on('click', function() {\n        switchToTab('qrcode');\n    });\n}\n\n// Switch between tabs\nfunction switchToTab(tab) {\n    // Update tab button states\n    updateTabButtonStates(tab);\n    \n    // Show/hide containers\n    if (tab === 'generator') {\n        jQuery('#generator').removeClass('d-none').show();\n        jQuery('#qrcode-container').addClass('d-none').hide();\n        \n        // Update page title context\n        document.title = 'Gr\u00FCner Bildgenerator';\n        \n    } else if (tab === 'qrcode') {\n        jQuery('#generator').addClass('d-none').hide();\n        jQuery('#qrcode-container').removeClass('d-none').show();\n        \n        // Initialize QR wizard if needed\n        if (typeof initializeQRWizard === 'function') {\n            initializeQRWizard();\n        }\n        \n        // Initialize QR generator if needed\n        if (typeof initializeQRGenerator === 'function') {\n            initializeQRGenerator();\n        }\n        \n        // Update page title context\n        document.title = 'QR-Code Generator - Gr\u00FCne';\n    }\n    \n    // Store current tab in localStorage\n    localStorage.setItem('gruener-generator-current-tab', tab);\n    \n    console.log('Switched to tab:', tab);\n}\n\n// Update tab button visual states\nfunction updateTabButtonStates(activeTab) {\n    // Desktop tabs\n    const desktopTabs = ['#tab-generator', '#tab-qrcode'];\n    desktopTabs.forEach(tabSelector => {\n        const tab = jQuery(tabSelector);\n        const isActive = (activeTab === 'generator' && tabSelector.includes('generator')) ||\n                        (activeTab === 'qrcode' && tabSelector.includes('qrcode'));\n        \n        if (isActive) {\n            tab.removeClass('bg-gray-200 text-gray-700')\n               .addClass('bg-gruene-primary text-white active');\n        } else {\n            tab.removeClass('bg-gruene-primary text-white active')\n               .addClass('bg-gray-200 text-gray-700');\n        }\n    });\n    \n    // Mobile tabs\n    const mobileTabs = ['#tab-generator-mobile', '#tab-qrcode-mobile'];\n    mobileTabs.forEach(tabSelector => {\n        const tab = jQuery(tabSelector);\n        const isActive = (activeTab === 'generator' && tabSelector.includes('generator')) ||\n                        (activeTab === 'qrcode' && tabSelector.includes('qrcode'));\n        \n        if (isActive) {\n            tab.removeClass('bg-gray-200 text-gray-700')\n               .addClass('bg-gruene-primary text-white active');\n        } else {\n            tab.removeClass('bg-gruene-primary text-white active')\n               .addClass('bg-gray-200 text-gray-700');\n        }\n    });\n}\n\n// Setup QR Download Handler\nfunction setupQRDownloadHandler() {\n    jQuery('#qr-download').on('click', function() {\n        if (typeof downloadQRCode === 'function') {\n            downloadQRCode();\n        } else {\n            console.error('downloadQRCode function not found');\n            showQRAlert('Download-Funktion nicht verf\u00FCgbar', 'error');\n        }\n    });\n}\n\n// Handle URL hash changes for direct linking\nfunction handleQRHashNavigation() {\n    const hash = window.location.hash;\n    \n    if (hash === '#qrcode-tab') {\n        switchToTab('qrcode');\n    } else if (hash === '#generator-tab' || hash === '') {\n        switchToTab('generator');\n    }\n}\n\n// Setup hash navigation\nfunction setupQRHashNavigation() {\n    // Handle initial hash\n    handleQRHashNavigation();\n    \n    // Handle hash changes\n    jQuery(window).on('hashchange', handleQRHashNavigation);\n    \n    // Update hash when tabs are clicked\n    jQuery('#tab-generator, #tab-generator-mobile').on('click', function() {\n        window.location.hash = '#generator-tab';\n    });\n    \n    jQuery('#tab-qrcode, #tab-qrcode-mobile').on('click', function() {\n        window.location.hash = '#qrcode-tab';\n    });\n}\n\n// Restore last used tab\nfunction restoreLastTab() {\n    const savedTab = localStorage.getItem('gruener-generator-current-tab');\n    \n    // Check URL hash first\n    const hash = window.location.hash;\n    if (hash === '#qrcode-tab') {\n        switchToTab('qrcode');\n        return;\n    }\n    \n    // Then check saved preference\n    if (savedTab && (savedTab === 'generator' || savedTab === 'qrcode')) {\n        switchToTab(savedTab);\n    } else {\n        // Default to generator\n        switchToTab('generator');\n    }\n}\n\n// Handle browser back/forward buttons\nfunction setupQRBrowserNavigation() {\n    window.addEventListener('popstate', function(event) {\n        handleQRHashNavigation();\n    });\n}\n\n// Keyboard shortcuts for tab navigation\nfunction setupQRKeyboardShortcuts() {\n    jQuery(document).on('keydown', function(e) {\n        // Only handle if no input is focused\n        if (jQuery('input:focus, textarea:focus, select:focus').length > 0) {\n            return;\n        }\n        \n        // Alt+1 for Generator, Alt+2 for QR Code\n        if (e.altKey && e.key === '1') {\n            e.preventDefault();\n            switchToTab('generator');\n            window.location.hash = '#generator-tab';\n        } else if (e.altKey && e.key === '2') {\n            e.preventDefault();\n            switchToTab('qrcode');\n            window.location.hash = '#qrcode-tab';\n        }\n    });\n}\n\n// Enhanced error handling for QR operations\nfunction setupQRErrorHandling() {\n    // Global error handler for QR-related errors\n    window.addEventListener('error', function(event) {\n        if (event.filename && event.filename.includes('qrcode')) {\n            console.error('QR Code related error:', event.error);\n            \n            // Show user-friendly error message\n            if (typeof showQRAlert === 'function') {\n                showQRAlert('Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es erneut.', 'error');\n            }\n        }\n    });\n    \n    // Promise rejection handler for QR operations\n    window.addEventListener('unhandledrejection', function(event) {\n        if (event.reason && typeof event.reason === 'object' && event.reason.message) {\n            if (event.reason.message.includes('QR') || event.reason.message.includes('qr')) {\n                console.error('QR Code promise rejection:', event.reason);\n                \n                if (typeof showQRAlert === 'function') {\n                    showQRAlert('Fehler bei der QR-Code Verarbeitung: ' + event.reason.message, 'error');\n                }\n                \n                event.preventDefault(); // Prevent browser default handling\n            }\n        }\n    });\n}\n\n// Initialize responsive behavior for QR interface\nfunction setupQRResponsiveBehavior() {\n    function handleResize() {\n        const width = window.innerWidth;\n        \n        // Handle mobile/desktop tab visibility\n        if (width >= 768) { // md breakpoint\n            // Desktop - show desktop tabs, hide mobile tabs\n            jQuery('.nav-tab').removeClass('hidden').show();\n            jQuery('.nav-tab-mobile').addClass('hidden').hide();\n        } else {\n            // Mobile - show mobile tabs, hide desktop tabs\n            jQuery('.nav-tab').addClass('hidden').hide();\n            jQuery('.nav-tab-mobile').removeClass('hidden').show();\n        }\n        \n        // Adjust QR preview size on mobile\n        if (width < 640) { // sm breakpoint\n            jQuery('.qr-preview-container canvas').css({\n                'max-width': '280px',\n                'max-height': '280px'\n            });\n        } else {\n            jQuery('.qr-preview-container canvas').css({\n                'max-width': '300px',\n                'max-height': '300px'\n            });\n        }\n    }\n    \n    // Initial setup\n    handleResize();\n    \n    // Handle window resize\n    jQuery(window).on('resize', debounce(handleResize, 250));\n}\n\n// Form validation helpers\nfunction setupQRFormValidation() {\n    // Real-time validation for URL fields\n    jQuery(document).on('input', 'input[type=\"url\"]', function() {\n        const input = jQuery(this);\n        const value = input.val().trim();\n        \n        if (value && !isValidURL(value)) {\n            input.addClass('border-red-300 focus:border-red-500');\n            \n            // Show validation hint\n            let hint = input.next('.validation-hint');\n            if (hint.length === 0) {\n                hint = jQuery('<div class=\"validation-hint text-xs text-red-600 mt-1\">G\u00FCltige URL eingeben (z.B. https://www.beispiel.de)</div>');\n                input.after(hint);\n            }\n        } else {\n            input.removeClass('border-red-300 focus:border-red-500');\n            input.next('.validation-hint').remove();\n        }\n    });\n    \n    // Real-time validation for email fields\n    jQuery(document).on('input', 'input[type=\"email\"]', function() {\n        const input = jQuery(this);\n        const value = input.val().trim();\n        \n        if (value && !isValidEmail(value)) {\n            input.addClass('border-red-300 focus:border-red-500');\n            \n            let hint = input.next('.validation-hint');\n            if (hint.length === 0) {\n                hint = jQuery('<div class=\"validation-hint text-xs text-red-600 mt-1\">G\u00FCltige E-Mail-Adresse eingeben</div>');\n                input.after(hint);\n            }\n        } else {\n            input.removeClass('border-red-300 focus:border-red-500');\n            input.next('.validation-hint').remove();\n        }\n    });\n}\n\n// Utility: Email validation\nfunction isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\n\n// Enhanced initialization with error handling\nfunction initializeQRHandlersWithErrorHandling() {\n    try {\n        initializeQRHandlers();\n        setupQRHashNavigation();\n        setupQRBrowserNavigation();\n        setupQRKeyboardShortcuts();\n        setupQRErrorHandling();\n        setupQRResponsiveBehavior();\n        setupQRFormValidation();\n        \n        // Restore last tab after short delay to ensure DOM is ready\n        setTimeout(restoreLastTab, 100);\n        \n        console.log('QR Code Handlers fully initialized with enhancements');\n        \n    } catch (error) {\n        console.error('Error initializing QR handlers:', error);\n        \n        // Fallback initialization\n        setTimeout(() => {\n            try {\n                initializeQRHandlers();\n                restoreLastTab();\n            } catch (fallbackError) {\n                console.error('Fallback QR handler initialization also failed:', fallbackError);\n            }\n        }, 500);\n    }\n}\n\n// Initialize when document is ready\njQuery(document).ready(function() {\n    initializeQRHandlersWithErrorHandling();\n});\n"],
  "mappings": "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",
  "names": ["template", "logo", "currentTemplate", "template", "index", "template", "logo", "canvas", "_"]
}
