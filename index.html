<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grüne Bilder</title>
    <!-- Favicon -->
    <link rel="icon" href="resources/images/gruene-logo.ico" sizes="any" />
    <link
      rel="icon"
      href="resources/images/gruene-logo.svg"
      type="image/svg+xml"
    />
    <link rel="manifest" href="resources/favicon/site.webmanifest" />
    <link
      rel="mask-icon"
      href="resources/favicon/safari-pinned-tab.svg"
      color="#5bbad5"
    />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
    <!-- Prevent search engine indexing -->
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex" />
    <meta name="googlebot" content="noindex, nofollow, noarchive, nosnippet, noimageindex" />
    <meta name="bingbot" content="noindex, nofollow, noarchive, nosnippet, noimageindex" />
    <!-- Fontawesome -->
    <link rel="stylesheet" href="vendors/fontawesome/css/all.css" />
    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="resources/css/output.css?v=1.5" />
    <!-- Fonts -->
    <link rel="stylesheet" type="text/css" href="resources/css/fonts.css" />
    <!-- Custom styles -->
    <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="resources/css/style.css?v=1.5"
    />
  </head>

  <body class="bg-gray-50 pb-12">
    <!-- Development Mode Timestamp -->
    <div id="dev-timestamp" class="bg-yellow-100 border-b border-yellow-300 px-4 py-2 text-center text-xs text-gray-700" style="display: none;">
      <strong>Development Mode</strong> - Last built: <span id="dev-timestamp-value">14.11.2025 16:12:19</span>
    </div>
    <script>
      // Show timestamp only in development mode (when accessing via localhost or during development)
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        document.getElementById('dev-timestamp').style.display = 'block';
      }
    </script>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="header uppercase py-3">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <img
              src="resources/images/gruene-logo.svg"
              width="32"
              alt="GRÜNE Logo"
            />
            <h1 class="text-gray-900 text-xl font-bold">
              Grüner Bildgenerator
            </h1>
          </div>
          <!-- Navigation Tabs -->
          <div class="hidden md:flex items-center gap-2">
            <button 
              id="tab-generator" 
              class="nav-tab active px-4 py-2 text-sm font-medium rounded-lg bg-gruene-primary text-white"
            >
              <i class="fas fa-image mr-2"></i>Bildgenerator
            </button>
            <button 
              id="tab-qrcode" 
              class="nav-tab px-4 py-2 text-sm font-medium rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300"
            >
              <i class="fas fa-qrcode mr-2"></i>QR-Code
            </button>
          </div>
          <div class="flex items-center gap-2 text-sm">
            <a
              href="mailto:florian.motlik@gruene.at"
              target="_blank"
              class="badge badge-dark"
            >
              <i class="fas fa-envelope"></i> Support
            </a>
            <button
              type="button"
              class="btn-sm btn-primary"
              id="video-modal-btn"
              data-video="https://www.youtube.com/embed/ukLWMNFAei0"
            >
              <i class="fas fa-play"></i> Erklärvideo
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Video Modal -->
    <div id="videoModal" class="modal-overlay hidden">
      <div class="modal-container max-w-3xl">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-medium text-gray-900">Erklärungsvideo</h3>
          <button
            type="button"
            class="text-gray-400 hover:text-gray-600"
            id="close-modal"
          >
            <span class="sr-only">Schließen</span>
            <svg
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
        <div class="aspect-video">
          <iframe
            id="video-iframe"
            width="100%"
            height="100%"
            src=""
            frameborder="0"
            allowfullscreen
          ></iframe>
        </div>
      </div>
    </div>
    
    <!-- Mobile Navigation Tabs -->
    <div class="md:hidden px-4 sm:px-6 lg:px-8 pb-4">
      <div class="flex gap-2">
        <button 
          id="tab-generator-mobile" 
          class="nav-tab-mobile active flex-1 px-4 py-2 text-sm font-medium rounded-lg bg-gruene-primary text-white text-center"
        >
          <i class="fas fa-image mr-2"></i>Bildgenerator
        </button>
        <button 
          id="tab-qrcode-mobile" 
          class="nav-tab-mobile flex-1 px-4 py-2 text-sm font-medium rounded-lg bg-gray-200 text-gray-700 text-center"
        >
          <i class="fas fa-qrcode mr-2"></i>QR-Code
        </button>
      </div>
    </div>
    
    <!-- QR Code Generator Container -->
    <div id="qrcode-container" class="container-fluid d-none">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2">
        <!-- QR Alert Container -->
        <div id="qr-alert-container" class="mb-4 hidden"></div>
        
        <!-- QR Code Progress Steps -->
        <div class="mb-6 hidden md:block">
          <div class="bg-white rounded-lg shadow-sm border border-gray-200 py-4 px-6">
            <nav aria-label="QR Code Progress" class="max-w-6xl mx-auto">
              <div class="flex items-center justify-between relative">
                <!-- QR Step 1 -->
                <div class="flex flex-col items-center text-center flex-1 cursor-pointer" onclick="qrGoToStep(1)">
                  <div id="qr-step-1-indicator" class="step-indicator active bg-green-600 text-white shadow-lg mb-2">
                    <i class="fas fa-list"></i>
                  </div>
                  <div>
                    <p class="text-xs font-bold text-gray-900">Schritt 1</p>
                    <p class="text-xs text-gray-600">Inhaltstyp wählen</p>
                  </div>
                </div>

                <!-- QR Progress Line 1-2 -->
                <div class="flex-1 px-4">
                  <div class="h-1 bg-gray-200 rounded-full relative">
                    <div id="qr-progress-1-2" class="h-1 bg-green-600 rounded-full transition-all duration-500 absolute top-0 left-0 w-0"></div>
                  </div>
                </div>

                <!-- QR Step 2 -->
                <div class="flex flex-col items-center text-center flex-1 cursor-pointer" onclick="qrGoToStep(2)">
                  <div id="qr-step-2-indicator" class="step-indicator bg-gray-300 text-gray-600 mb-2">
                    <i class="fas fa-edit"></i>
                  </div>
                  <div>
                    <p class="text-xs font-bold text-gray-500">Schritt 2</p>
                    <p class="text-xs text-gray-500">Inhalte eingeben</p>
                  </div>
                </div>

                <!-- QR Progress Line 2-3 -->
                <div class="flex-1 px-4">
                  <div class="h-1 bg-gray-200 rounded-full relative">
                    <div id="qr-progress-2-3" class="h-1 bg-green-600 rounded-full transition-all duration-500 absolute top-0 left-0 w-0"></div>
                  </div>
                </div>

                <!-- QR Step 3 -->
                <div class="flex flex-col items-center text-center flex-1 cursor-pointer" onclick="qrGoToStep(3)">
                  <div id="qr-step-3-indicator" class="step-indicator bg-gray-300 text-gray-600 mb-2">
                    <i class="fas fa-qrcode"></i>
                  </div>
                  <div>
                    <p class="text-xs font-bold text-gray-500">Schritt 3</p>
                    <p class="text-xs text-gray-500">QR-Code erstellen</p>
                  </div>
                </div>
              </div>
            </nav>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
          <!-- Left Column - QR Controls -->
          <div class="lg:col-span-1 order-2 lg:order-1">
            <!-- QR Step 1: Content Type Selection -->
            <div id="qr-step-1" class="qr-step-content bg-white rounded-xl shadow-sm border border-gray-200 p-8">
              <div class="flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-6 mb-6 text-center md:text-left">
                <div class="w-12 h-12 md:w-12 md:h-12 bg-green-600 text-white rounded-full flex items-center justify-center text-lg font-bold shadow-lg flex-shrink-0">
                  <i class="fas fa-list"></i>
                </div>
                <div class="flex-1">
                  <h2 class="text-2xl md:text-xl font-bold text-gray-900 mb-2 md:mb-1 leading-tight">
                    Inhaltstyp wählen
                  </h2>
                  <p class="text-gray-600 text-base md:text-sm leading-relaxed">
                    Wählen Sie aus, welchen Inhalt Ihr QR-Code enthalten soll
                  </p>
                </div>
              </div>
              <div class="space-y-4">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <button class="qr-type-button" data-type="text">
                    <i class="fas fa-font text-2xl mb-3"></i>
                    <div class="font-medium text-lg">Text</div>
                    <div class="text-sm text-gray-600">Einfacher Text</div>
                  </button>
                  <button class="qr-type-button" data-type="url">
                    <i class="fas fa-globe text-2xl mb-3"></i>
                    <div class="font-medium text-lg">Homepage</div>
                    <div class="text-sm text-gray-600">Website-Link</div>
                  </button>
                  <button class="qr-type-button" data-type="email">
                    <i class="fas fa-envelope text-2xl mb-3"></i>
                    <div class="font-medium text-lg">E-Mail</div>
                    <div class="text-sm text-gray-600">E-Mail mit Betreff</div>
                  </button>
                  <button class="qr-type-button" data-type="vcard">
                    <i class="fas fa-user text-2xl mb-3"></i>
                    <div class="font-medium text-lg">Visitenkarte</div>
                    <div class="text-sm text-gray-600">Kontaktdaten</div>
                  </button>
                </div>
                <button id="qr-step-1-next" class="w-full btn-primary disabled:opacity-50" disabled>
                  Weiter zur Eingabe
                </button>
              </div>
            </div>

            <!-- QR Step 2: Content Input -->
            <div id="qr-step-2" class="qr-step-content hidden bg-white rounded-xl shadow-sm border border-gray-200 p-8">
              <div class="flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-6 mb-6 text-center md:text-left">
                <div class="w-12 h-12 md:w-12 md:h-12 bg-green-600 text-white rounded-full flex items-center justify-center text-lg font-bold shadow-lg flex-shrink-0">
                  <i class="fas fa-edit"></i>
                </div>
                <div class="flex-1">
                  <h2 class="text-2xl md:text-xl font-bold text-gray-900 mb-2 md:mb-1 leading-tight">
                    Inhalte eingeben
                  </h2>
                  <p class="text-gray-600 text-base md:text-sm leading-relaxed">
                    Geben Sie die Informationen für Ihren QR-Code ein
                  </p>
                </div>
              </div>
              <div class="space-y-4">
                <div id="qr-form-container">
                  <!-- Dynamic forms will be inserted here -->
                </div>
                <div class="flex space-x-3">
                  <button id="qr-step-2-back" class="flex-1 btn-secondary">
                    Zurück
                  </button>
                  <button id="qr-step-2-next" class="flex-1 btn-primary">
                    QR-Code erstellen
                  </button>
                </div>
              </div>
            </div>

            <!-- QR Step 3: QR Code Generation -->
            <div id="qr-step-3" class="qr-step-content hidden bg-white rounded-xl shadow-sm border border-gray-200 p-8">
              <div class="flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-6 mb-6 text-center md:text-left">
                <div class="w-12 h-12 md:w-12 md:h-12 bg-green-600 text-white rounded-full flex items-center justify-center text-lg font-bold shadow-lg flex-shrink-0">
                  <i class="fas fa-qrcode"></i>
                </div>
                <div class="flex-1">
                  <h2 class="text-2xl md:text-xl font-bold text-gray-900 mb-2 md:mb-1 leading-tight">
                    QR-Code anpassen
                  </h2>
                  <p class="text-gray-600 text-base md:text-sm leading-relaxed">
                    Passen Sie Farben an und laden Sie Ihren QR-Code herunter
                  </p>
                </div>
              </div>
              <div class="space-y-4">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <div>
                    <label for="qr-color-select" class="block text-sm font-medium text-gray-700 mb-2">
                      QR-Code Farbe:
                    </label>
                    <select class="form-select w-full" id="qr-color-select">
                      <option value="#000000">Schwarz</option>
                      <option value="#FFFFFF">Weiß</option>
                      <option value="#538430">Dunkelgrün</option>
                      <option value="#82B624">Hellgrün</option>
                      <option value="#FFED00">Gelb</option>
                      <option value="#E6007E">Magenta</option>
                    </select>
                  </div>
                  <div>
                    <label for="qr-background-select" class="block text-sm font-medium text-gray-700 mb-2">
                      Hintergrund:
                    </label>
                    <select class="form-select w-full" id="qr-background-select">
                      <option value="#FFFFFF">Weiß</option>
                      <option value="#000000">Schwarz</option>
                      <option value="transparent">Transparent</option>
                    </select>
                  </div>
                </div>
                <button class="w-full btn-primary text-lg py-3" id="qr-download">
                  <i class="fas fa-download mr-2"></i>QR-Code als PNG herunterladen
                </button>
                <div class="flex space-x-3">
                  <button id="qr-step-3-back" class="flex-1 btn-secondary">
                    Zurück
                  </button>
                  <button id="qr-start-over" class="flex-1 btn-secondary">
                    Neuer QR-Code
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Column - QR Preview -->
          <div class="lg:col-span-2 order-1 lg:order-2">
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900">
                  QR-Code Vorschau
                </h3>
                <div class="text-sm text-gray-500" id="qr-status">
                  Wählen Sie einen Inhaltstyp
                </div>
              </div>
              <div class="qr-preview-container">
                <div class="flex justify-center items-center min-h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300">
                  <div id="qr-preview-placeholder" class="text-center text-gray-400">
                    <i class="fas fa-qrcode text-6xl mb-4"></i>
                    <p class="text-lg">QR-Code Vorschau</p>
                    <p class="text-sm">Wählen Sie einen Inhaltstyp aus</p>
                  </div>
                  <div id="qr-preview-display" class="hidden"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="generator">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2">
        <!-- Progress Steps -->
        <div class="mb-6 hidden md:block">
          <div
            class="bg-white rounded-lg shadow-sm border border-gray-200 py-4 px-6"
          >
            <nav aria-label="Progress" class="max-w-6xl mx-auto">
              <!-- Desktop Layout -->
              <div class="block">
                <div class="flex items-center justify-between relative">
                  <!-- Step 1 -->
                  <div
                    class="flex flex-col items-center text-center flex-1 cursor-pointer"
                    onclick="goToStep(1)"
                  >
                    <div
                      id="step-1-indicator"
                      class="step-indicator active bg-green-600 text-white shadow-lg mb-2"
                    >
                      <i class="fas fa-layer-group"></i>
                    </div>
                    <div>
                      <p class="text-xs font-bold text-gray-900">Schritt 1</p>
                      <p class="text-xs text-gray-600">Vorlage wählen</p>
                    </div>
                  </div>

                  <!-- Progress Line 1-2 -->
                  <div class="flex-1 px-4">
                    <div class="h-1 bg-gray-200 rounded-full relative">
                      <div
                        id="progress-1-2"
                        class="h-1 bg-green-600 rounded-full transition-all duration-500 absolute top-0 left-0 w-full"
                      ></div>
                    </div>
                  </div>

                  <!-- Step 2 -->
                  <div
                    class="flex flex-col items-center text-center flex-1 cursor-pointer"
                    onclick="goToStep(2)"
                  >
                    <div
                      id="step-2-indicator"
                      class="step-indicator bg-gray-300 text-gray-600 mb-2"
                    >
                      <i class="fas fa-image"></i>
                    </div>
                    <div>
                      <p class="text-xs font-bold text-gray-500">Schritt 2</p>
                      <p class="text-xs text-gray-500">Hintergrundbild</p>
                    </div>
                  </div>

                  <!-- Progress Line 2-3 -->
                  <div class="flex-1 px-4">
                    <div class="h-1 bg-gray-200 rounded-full relative">
                      <div
                        id="progress-2-3"
                        class="h-1 bg-green-600 rounded-full transition-all duration-500 absolute top-0 left-0 w-0"
                      ></div>
                    </div>
                  </div>

                  <!-- Step 3 -->
                  <div
                    class="flex flex-col items-center text-center flex-1 cursor-pointer"
                    onclick="goToStep(3)"
                  >
                    <div
                      id="step-3-indicator"
                      class="step-indicator bg-gray-300 text-gray-600 mb-2"
                    >
                      <i class="fas fa-edit"></i>
                    </div>
                    <div>
                      <p class="text-xs font-bold text-gray-500">Schritt 3</p>
                      <p class="text-xs text-gray-500">Inhalte hinzufügen</p>
                    </div>
                  </div>

                  <!-- Progress Line 3-4 -->
                  <div class="flex-1 px-4">
                    <div class="h-1 bg-gray-200 rounded-full relative">
                      <div
                        id="progress-3-4"
                        class="h-1 bg-green-600 rounded-full transition-all duration-500 absolute top-0 left-0 w-0"
                      ></div>
                    </div>
                  </div>

                  <!-- Step 4 -->
                  <div
                    class="flex flex-col items-center text-center flex-1 cursor-pointer"
                    onclick="goToStep(4)"
                  >
                    <div
                      id="step-4-indicator"
                      class="step-indicator bg-gray-300 text-gray-600 mb-2"
                    >
                      <i class="fas fa-download"></i>
                    </div>
                    <div>
                      <p class="text-xs font-bold text-gray-500">Schritt 4</p>
                      <p class="text-xs text-gray-500">Download</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Mobile Layout (Hidden) -->
              <div class="hidden">
                <!-- Step 1 -->
                <div
                  class="flex items-center space-x-3 p-3 rounded-lg bg-green-50 border border-green-200 cursor-pointer"
                  onclick="goToStep(1)"
                >
                  <div
                    id="step-1-indicator-mobile"
                    class="step-indicator active bg-green-600 text-white shadow-lg flex-shrink-0"
                  >
                    <i class="fas fa-layer-group"></i>
                  </div>
                  <div class="flex-1">
                    <p class="text-sm font-bold text-gray-900">Schritt 1</p>
                    <p class="text-sm text-gray-600">Vorlage wählen</p>
                  </div>
                </div>

                <!-- Step 2 -->
                <div
                  class="flex items-center space-x-3 p-3 rounded-lg cursor-pointer"
                  onclick="goToStep(2)"
                >
                  <div
                    id="step-2-indicator-mobile"
                    class="step-indicator bg-gray-300 text-gray-600 flex-shrink-0"
                  >
                    <i class="fas fa-image"></i>
                  </div>
                  <div class="flex-1">
                    <p class="text-sm font-bold text-gray-500">Schritt 2</p>
                    <p class="text-sm text-gray-500">Hintergrundbild</p>
                  </div>
                </div>

                <!-- Step 3 -->
                <div
                  class="flex items-center space-x-3 p-3 rounded-lg cursor-pointer"
                  onclick="goToStep(3)"
                >
                  <div
                    id="step-3-indicator-mobile"
                    class="step-indicator bg-gray-300 text-gray-600 flex-shrink-0"
                  >
                    <i class="fas fa-edit"></i>
                  </div>
                  <div class="flex-1">
                    <p class="text-sm font-bold text-gray-500">Schritt 3</p>
                    <p class="text-sm text-gray-500">Inhalte hinzufügen</p>
                  </div>
                </div>

                <!-- Step 4 -->
                <div
                  class="flex items-center space-x-3 p-3 rounded-lg cursor-pointer"
                  onclick="goToStep(4)"
                >
                  <div
                    id="step-4-indicator-mobile"
                    class="step-indicator bg-gray-300 text-gray-600 flex-shrink-0"
                  >
                    <i class="fas fa-download"></i>
                  </div>
                  <div class="flex-1">
                    <p class="text-sm font-bold text-gray-500">Schritt 4</p>
                    <p class="text-sm text-gray-500">Download</p>
                  </div>
                </div>
              </div>
            </nav>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
          <!-- Left Column - Controls -->
          <div class="lg:col-span-1 order-2 lg:order-1">
            <!-- Step 1: Template Selection -->
            <div
              id="step-1"
              class="step-content bg-white rounded-xl shadow-sm border border-gray-200 p-8"
            >
              <div
                class="flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-6 mb-6 text-center md:text-left"
              >
                <div
                  class="w-12 h-12 md:w-12 md:h-12 bg-green-600 text-white rounded-full flex items-center justify-center text-lg font-bold shadow-lg flex-shrink-0"
                >
                  <i class="fas fa-layer-group"></i>
                </div>
                <div class="flex-1">
                  <h2
                    class="text-2xl md:text-xl font-bold text-gray-900 mb-2 md:mb-1 leading-tight"
                  >
                    Vorlage auswählen
                  </h2>
                  <p class="text-gray-600 text-base md:text-sm leading-relaxed">
                    Wählen Sie das passende Format für Ihr Bild
                  </p>
                </div>
              </div>
              <div class="space-y-4">
                <div>
                  <label
                    for="canvas-template"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Wofür möchten Sie das Bild verwenden?</label
                  >
                  <select
                    class="form-select text-method w-full"
                    name="canvas-template"
                    id="canvas-template"
                  >
                    <optgroup label="Social Media">
                      <option value="post_45_border">Post 4:5 mit Rahmen</option>
                      <option value="post_45_no_border">Post 4:5 ohne Rahmen</option>
                      <option value="story">Instagram/Facebook Story</option>
                      <option value="event">Veranstaltung</option>
                      <option value="facebook_header">Facebook Header</option>
                    </optgroup>
                    <optgroup label="Druck">
                      <option value="a4">A4 Poster</option>
                      <option value="a4_quer">A4 Querformat</option>
                      <option value="a3">A3 Poster</option>
                      <option value="a3_quer">A3 Querformat</option>
                      <option value="a2">A2 Poster</option>
                      <option value="a2_quer">A2 Querformat</option>
                      <option value="a5">A5 Flyer</option>
                      <option value="a5_quer">A5 Querformat</option>
                      <option value="a6">A6 Flyer</option>
                      <option value="a6_quer">A6 Querformat</option>
                    </optgroup>
                  </select>
                </div>
                <div>
                  <label
                    for="logo-selection"
                    class="block text-sm font-medium text-gray-700 mb-2"
                    >Ihre Organisation:</label
                  >
                  <select
                    class="form-select text-method w-full"
                    name="logo-selection"
                    id="logo-selection"
                  >
                    <optgroup label="Allgemein">
                      <option value="">Logo auswählen...</option>
                      <option value="GRUENE.AT">GRUENE.AT</option>
                    </optgroup>
                  </select>
                </div>
                <div class="mt-4 flex items-center">
                  <input
                    type="checkbox"
                    id="logo-toggle"
                    class="form-checkbox h-4 w-4 text-green-600 rounded border-gray-300 focus:ring-green-500"
                    checked
                  />
                  <label for="logo-toggle" class="ml-2 text-sm text-gray-700">
                    Logo am unteren Rand hinzufügen
                  </label>
                </div>
                <button id="step-1-next" class="w-full btn-primary">
                  Weiter zum Hintergrundbild
                </button>
              </div>
            </div>

            <!-- Step 2: Background Image -->
            <div
              id="step-2"
              class="step-content hidden bg-white rounded-xl shadow-sm border border-gray-200 p-8"
            >
              <div
                class="flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-6 mb-6 text-center md:text-left"
              >
                <div
                  class="w-12 h-12 md:w-12 md:h-12 bg-green-600 text-white rounded-full flex items-center justify-center text-lg font-bold shadow-lg flex-shrink-0"
                >
                  <i class="fas fa-image"></i>
                </div>
                <div class="flex-1">
                  <h2
                    class="text-2xl md:text-xl font-bold text-gray-900 mb-2 md:mb-1 leading-tight"
                  >
                    Hintergrundbild hinzufügen
                  </h2>
                  <p class="text-gray-600 text-base md:text-sm leading-relaxed">
                    Wählen Sie eine Vorlage oder laden Sie Ihr eigenes Bild hoch
                  </p>
                </div>
              </div>
              <div class="space-y-4">
                <!-- Template Images -->
                <div class="bg-gray-50 rounded-lg p-4">
                  <div class="grid memes-container">
                    <div class="grid-sizer"></div>
                  </div>
                </div>

                <!-- Custom Upload -->
                <div class="border-t pt-4">
                  <h4 class="text-sm font-medium text-gray-700 mb-3">
                    Bild hochladen:
                  </h4>
                  <input type="file" class="hidden" id="meme-input" />
                  <label
                    class="btn-secondary btn-block cursor-pointer"
                    for="meme-input"
                  >
                    <i class="fas fa-upload mr-2"></i>Eigenes Bild hochladen
                  </label>
                </div>

                <div class="flex space-x-3">
                  <button id="step-2-back" class="flex-1 btn-secondary">
                    Zurück
                  </button>
                  <button id="step-2-next" class="flex-1 btn-primary">
                    Weiter zu Inhalten
                  </button>
                </div>
              </div>
            </div>

            <!-- Step 3: Content -->
            <div
              id="step-3"
              class="step-content hidden bg-white rounded-xl shadow-sm border border-gray-200 p-8"
            >
              <div
                class="flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-6 mb-6 text-center md:text-left"
              >
                <div
                  class="w-12 h-12 md:w-12 md:h-12 bg-green-600 text-white rounded-full flex items-center justify-center text-lg font-bold shadow-lg flex-shrink-0"
                >
                  <i class="fas fa-edit"></i>
                </div>
                <div class="flex-1">
                  <h2
                    class="text-2xl md:text-xl font-bold text-gray-900 mb-2 md:mb-1 leading-tight"
                  >
                    Inhalte hinzufügen
                  </h2>
                  <p class="text-gray-600 text-base md:text-sm leading-relaxed">
                    Fügen Sie Text, Bilder und andere Elemente hinzu
                  </p>
                </div>
              </div>
              <div class="space-y-6">
                <!-- Text Section -->
                <div class="border-b">
                  <button
                    class="step-section-header w-full text-left cursor-pointer hover:bg-gray-50 p-2 -mx-2 rounded transition-colors duration-200"
                    onclick="toggleSection('text-section')"
                    aria-expanded="false"
                  >
                    <i class="fas fa-font"></i>
                    <h4>Text hinzufügen</h4>
                    <i
                      class="fas fa-chevron-down text-gray-400 ml-auto transition-transform duration-200"
                      id="text-section-chevron"
                      style="transform: rotate(-90deg)"
                    ></i>
                  </button>
                  <div id="text-section" class="space-y-4 mt-4 hidden">
                    <div>
                      <label
                        for="text"
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >Ihr Text:</label
                      >
                      <textarea
                        class="form-input text-method w-full"
                        id="text"
                        placeholder="Ihren Text hier eingeben..."
                        rows="3"
                      ></textarea>
                    </div>
                    <div class="space-y-4">
                      <div>
                        <label
                          for="font-style-select"
                          class="block text-sm font-medium text-gray-700 mb-2"
                          >Schriftart:</label
                        >
                        <select
                          class="form-select w-full"
                          id="font-style-select"
                        >
                          <option value="Gotham Narrow Ultra">
                            Überschrift
                          </option>
                          <option value="Gotham Narrow Book">Fließtext</option>
                        </select>
                      </div>
                    </div>
                    <div class="space-y-4">
                      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                          <label
                            for="text-color"
                            class="block text-sm font-medium text-gray-700 mb-2"
                            >Textfarbe:</label
                          >
                          <select
                            class="form-select text-method w-full"
                            name="text-color"
                            id="text-color"
                          >
                            <option value="rgb(255,240,0)">Gelb</option>
                            <option value="rgb(255,255,255)">Weiß</option>
                          </select>
                        </div>
                        <div>
                          <label
                            for="line-height"
                            class="block text-sm font-medium text-gray-700 mb-2"
                            >Zeilenabstand:</label
                          >
                          <select
                            class="form-select text-method w-full"
                            name="line-height"
                            id="line-height"
                          >
                            <option value="0.8">Klein</option>
                            <option value="0.9">Mittel</option>
                            <option value="1.1">Groß</option>
                          </select>
                        </div>
                      </div>
                      <div
                        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4"
                      >
                        <div>
                          <label
                            for="shadow-depth"
                            class="block text-sm font-medium text-gray-700 mb-2"
                            >Schatten:</label
                          >
                          <input
                            class="form-input text-method w-full"
                            type="number"
                            value="3"
                            id="shadow-depth"
                            min="0"
                            max="30"
                            placeholder="0"
                          />
                        </div>
                        <div>
                          <label
                            class="block text-sm font-medium text-gray-700 mb-2"
                            >Ausrichtung:</label
                          >
                          <div class="btn-group w-full">
                            <label
                              class="btn-primary align cursor-pointer flex-1"
                            >
                              <input
                                type="radio"
                                value="left"
                                name="align"
                                id="left"
                                class="sr-only"
                              />
                              <i class="fas fa-align-left"></i>
                            </label>
                            <label
                              class="btn-primary active align cursor-pointer flex-1"
                            >
                              <input
                                type="radio"
                                value="center"
                                name="align"
                                id="center"
                                checked
                                class="sr-only"
                              />
                              <i class="fas fa-align-center"></i>
                            </label>
                            <label
                              class="btn-primary align cursor-pointer flex-1"
                            >
                              <input
                                type="radio"
                                value="right"
                                name="align"
                                id="right"
                                class="sr-only"
                              />
                              <i class="fas fa-align-right"></i>
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <button class="btn-primary w-full btn-lg" id="add-text">
                      <i class="fas fa-plus mr-2"></i>Text einfügen
                    </button>
                  </div>
                </div>

                <!-- Additional Elements -->
                <div class="border-b">
                  <button
                    class="step-section-header w-full text-left cursor-pointer hover:bg-gray-50 p-2 -mx-2 rounded transition-colors duration-200"
                    onclick="toggleSection('elements-section')"
                    aria-expanded="false"
                  >
                    <i class="fas fa-shapes"></i>
                    <h4>Weitere Elemente</h4>
                    <i
                      class="fas fa-chevron-down text-gray-400 ml-auto transition-transform duration-200"
                      id="elements-section-chevron"
                      style="transform: rotate(-90deg)"
                    ></i>
                  </button>
                  <div id="elements-section" class="mt-4 hidden">
                    <div class="element-buttons-grid">
                      <input type="file" class="hidden" id="add-image" />
                      <label class="element-button" for="add-image">
                        <i class="fas fa-image"></i>Bild hinzufügen
                      </label>
                      <button class="element-button" id="add-pink-circle">
                        <i class="fas fa-circle"></i>Rosa Kreis
                      </button>
                      <button class="element-button" id="add-cross">
                        <i class="fas fa-check"></i>Häkchen
                      </button>
                      <button class="element-button" id="show-qr-section">
                        <i class="fas fa-qrcode"></i>QR Code
                      </button>
                    </div>
                  </div>
                </div>

                <!-- QR Code Section (Initially Hidden) -->
                <div id="qr-section" class="hidden border-b pb-4">
                  <div class="step-section-header">
                    <i class="fas fa-qrcode"></i>
                    <h4>QR Code erstellen</h4>
                  </div>
                  <div class="space-y-4">
                    <div>
                      <input
                        type="text"
                        class="form-input w-full"
                        id="qr-text"
                        placeholder="Link oder Text für QR Code eingeben..."
                      />
                    </div>
                    <div>
                      <label
                        for="qr-color"
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >QR Code Farbe:</label
                      >
                      <select class="form-select w-full" id="qr-color">
                        <option value="#000000">Schwarz</option>
                        <option value="#538430">Dunkelgrün</option>
                      </select>
                    </div>
                    <div>
                      <button class="btn-primary w-full" id="add-qr-code">
                        <i class="fas fa-plus mr-2"></i>QR Code einfügen
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Element Controls -->
                <div class="element-controls">
                  <button
                    class="step-section-header w-full text-left cursor-pointer hover:bg-gray-50 p-2 -mx-2 rounded transition-colors duration-200"
                    onclick="toggleSection('controls-section')"
                    aria-expanded="false"
                  >
                    <i class="fas fa-cog"></i>
                    <h4>Element bearbeiten</h4>
                    <i
                      class="fas fa-chevron-down text-gray-400 ml-auto transition-transform duration-200"
                      id="controls-section-chevron"
                      style="transform: rotate(-90deg)"
                    ></i>
                  </button>
                  <div id="controls-section" class="space-y-4 mt-4 hidden">
                    <div class="grid grid-cols-2 gap-3">
                      <button class="btn-secondary" id="bring-to-front">
                        <i class="fas fa-arrow-up mr-2"></i>In Vordergrund
                      </button>
                      <button class="btn-danger" id="remove-element">
                        <i class="fas fa-trash mr-2"></i>Löschen
                      </button>
                    </div>
                    <div class="space-y-3">
                      <div
                        class="bg-yellow-50 border border-yellow-200 rounded-md p-3"
                      >
                        <div class="flex items-start">
                          <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-yellow-400"></i>
                          </div>
                          <div class="ml-3">
                            <p class="text-sm text-yellow-700">
                              <strong>Kreis-Ausschnitt:</strong> Wählen Sie
                              zuerst ein eingefügtes Bild aus, dann klicken Sie
                              auf "Kreis anwenden" um nur einen runden Bereich
                              zu zeigen.
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="grid grid-cols-2 gap-3">
                        <div>
                          <label
                            for="circle-radius"
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >Kreis Größe:</label
                          >
                          <select
                            class="form-select w-full"
                            name="circle-radius"
                            id="circle-radius"
                          >
                            <option value="2">Groß (90%)</option>
                            <option value="3">Mittel (70%)</option>
                            <option value="4">Klein (50%)</option>
                          </select>
                        </div>
                        <div class="flex items-end">
                          <button class="btn-secondary w-full" id="add-circle">
                            <i class="fas fa-circle mr-2"></i>Kreis anwenden
                          </button>
                        </div>
                      </div>
                    </div>
                    <div>
                      <label
                        for="scale"
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >Größe anpassen:</label
                      >
                      <input
                        type="range"
                        class="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                        id="scale"
                        min="0.1"
                        step="0.01"
                        max="2"
                      />
                    </div>
                  </div>
                </div>

                <div class="flex space-x-3">
                  <button id="step-3-back" class="flex-1 btn-secondary">
                    Zurück
                  </button>
                  <button id="step-3-next" class="flex-1 btn-primary">
                    Zum Download
                  </button>
                </div>
              </div>
            </div>

            <!-- Step 4: Download -->
            <div
              id="step-4"
              class="step-content hidden bg-white rounded-xl shadow-sm border border-gray-200 p-8"
            >
              <div
                class="flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-6 mb-6 text-center md:text-left"
              >
                <div
                  class="w-12 h-12 md:w-12 md:h-12 bg-green-600 text-white rounded-full flex items-center justify-center text-lg font-bold shadow-lg flex-shrink-0"
                >
                  <i class="fas fa-download"></i>
                </div>
                <div class="flex-1">
                  <h2
                    class="text-2xl md:text-xl font-bold text-gray-900 mb-2 md:mb-1 leading-tight"
                  >
                    Bild herunterladen
                  </h2>
                  <p class="text-gray-600 text-base md:text-sm leading-relaxed">
                    Ihr Bild ist fertig - laden Sie es herunter
                  </p>
                </div>
              </div>
              <div class="space-y-4">
                <div class="bg-blue-50 border border-blue-200 rounded-md p-4">
                  <div class="flex">
                    <div class="flex-shrink-0">
                      <i class="fas fa-info-circle text-blue-400"></i>
                    </div>
                    <div class="ml-3">
                      <p class="text-sm text-blue-700">
                        Ihr Bild ist fertig! Überprüfen Sie die Vorschau und
                        laden Sie es herunter.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Advanced Options (Collapsible) -->
                <div class="border rounded-lg">
                  <button
                    id="toggle-advanced"
                    class="w-full flex justify-between items-center p-4 text-left"
                  >
                    <span class="text-sm font-medium text-gray-700"
                      >Erweiterte Optionen</span
                    >
                    <i class="fas fa-chevron-down text-gray-400"></i>
                  </button>
                  <div
                    id="advanced-options"
                    class="hidden border-t p-4 space-y-3"
                  >
                    <div class="grid grid-cols-2 gap-3">
                      <div>
                        <label
                          for="image-format"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Format:</label
                        >
                        <select
                          class="form-select text-method w-full"
                          name="image-format"
                          id="image-format"
                        >
                          <option value="png">PNG (bessere Qualität)</option>
                          <option value="jpeg">JPEG (kleinere Datei)</option>
                        </select>
                      </div>
                      <div id="quality-section">
                        <label
                          for="image-quality"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >Qualität:</label
                        >
                        <select
                          class="form-select text-method w-full"
                          name="image-quality"
                          id="image-quality"
                        >
                          <option value="1.0">Hoch</option>
                          <option value="0.5">Mittel</option>
                          <option value="0.1">Niedrig</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <button
                  class="btn-primary w-full text-lg py-3"
                  id="generate-meme"
                >
                  <i class="fas fa-download mr-2"></i>Bild herunterladen
                </button>

                <div class="flex space-x-3">
                  <button id="step-4-back" class="flex-1 btn-secondary">
                    Zurück
                  </button>
                  <button id="start-over" class="flex-1 btn-secondary">
                    Neues Bild erstellen
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Column - Preview -->
          <div class="lg:col-span-2 order-1 lg:order-2">
            <div
              class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"
            >
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900">
                  Live Vorschau
                </h3>
                <div class="text-sm text-gray-500" id="canvas-dimensions">
                  1080 × 1080 px • 200 DPI
                </div>
              </div>
              <div class="meme-preview">
                <div class="fabric-canvas-wrapper">
                  <canvas id="meme-canvas"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="alert-container hidden"></div>

      <script id="meme-template" type="x-tmpl-mustache">
        <div class="grid-item">
            <img src="{{url}}" crossorigin alt="{{name}}" img-height="{{height}}" img-width="{{width}}"/>
        </div>
      </script>
    </div>

    <script src="vendors/jquery/jquery-3.7.1.min.js"></script>
    <script src="vendors/mustache/mustache.js"></script>
    <script src="vendors/imagesloaded/imagesloaded.pkgd.min.js"></script>
    <script src="vendors/masonry/masonry.pkgd.min.js"></script>
    <script src="vendors/fabric-js/fabric.min.js"></script>
    <script src="vendors/fontfaceobserver/fontfaceobserver.standalone.js"></script>
    <script src="vendors/qrcode.min.js"></script>

    <!-- Core utilities - must load first -->
    <script src="resources/js/constants.js"></script>
    <script src="resources/js/validation.js"></script>
    <script src="resources/js/logo-state.js"></script>
    <script src="resources/js/alert-system.js"></script>
    <script src="resources/js/canvas-utils.js"></script>
    <script src="resources/js/event-handlers.js"></script>
    
    <!-- Application modules -->
    <script src="resources/js/modal.js"></script>
    <script src="resources/js/searchable-select.js"></script>
    <script src="resources/js/initialization.js"></script>
    <script src="resources/js/helpers.js"></script>
    <script src="resources/js/choice-image.js"></script>
    <script src="resources/js/handlers.js"></script>
    <script src="resources/js/main.js"></script>
    <script src="resources/js/wizard.js"></script>
    
    <!-- QR Code Module Scripts -->
    <script src="resources/js/qrcode/qrcode-helpers.js"></script>
    <script src="resources/js/qrcode/qrcode-generator.js"></script>
    <script src="resources/js/qrcode/qrcode-wizard.js"></script>
    <script src="resources/js/qrcode/qrcode-handlers.js"></script>
  </body>
</html>
